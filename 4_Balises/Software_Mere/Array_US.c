/*
 *	Club Robot ESEO 2012 - 2013
 *
 *	Fichier : Array_US.c
 *	Package : Balises
 *	Description : tableaux et fonctions permettant le calcul de la position
 *   				du robot adverse selon les distances mesurées
 *	Auteur : Nirgal
 *	Version 201208
 */

 
#include "Array_US.h"

/*
O : balises fixes
R : 1 robot adverse

  ----y->				3m
  |		________________________________O  Corner
  x		|							  /	|
  |		|							 d1	|
  v		|				    	    / 	|
		O-------------d2-----------R   	|  2m
		Midle					  	\	|
		|							 d0	|
		|							  \	|
		________________________________O  Mother

*/
#define ENABLE_ARRAY_US
#ifdef ENABLE_ARRAY_US

// remarque : "la mémoire n'est pas suffisante pour descendre à la précision inférieur (mm*64 au lieu de mm*128)
//les tableaux seraient 4 fois plus grand... càd environ : 6534*4=26136 mots... le reste du code ne laisse pas cette place !

const Sint16 __attribute__ ((space(psv))) array_x_from_d0_d1 [33][33]=
{
{1000, 1004, 1016, 1037, 1066, 1102, 1147, 1201, 1262, 1332, 1410, 1496, 1590, 1692, 1803, 1922, 2049, 2184, 2327, 2479, 2638, 2806, 2982, 3167, 3359, 3560, 3769, 3986, 4211, 4445, 4686, 4936, 5194},
{996, 1000, 1012, 1033, 1061, 1098, 1143, 1197, 1258, 1328, 1406, 1492, 1586, 1688, 1799, 1918, 2044, 2180, 2323, 2475, 2634, 2802, 2978, 3163, 3355, 3556, 3765, 3982, 4207, 4441, 4682, 4932, 5190},
{984, 988, 1000, 1020, 1049, 1086, 1131, 1184, 1246, 1315, 1393, 1479, 1573, 1676, 1786, 1905, 2032, 2167, 2311, 2462, 2622, 2790, 2966, 3150, 3343, 3544, 3753, 3970, 4195, 4428, 4670, 4920, 5178},
{963, 967, 980, 1000, 1029, 1066, 1111, 1164, 1225, 1295, 1373, 1459, 1553, 1655, 1766, 1885, 2012, 2147, 2290, 2442, 2602, 2769, 2946, 3130, 3322, 3523, 3732, 3949, 4174, 4408, 4650, 4899, 5157},
{934, 939, 951, 971, 1000, 1037, 1082, 1135, 1197, 1266, 1344, 1430, 1524, 1627, 1737, 1856, 1983, 2118, 2262, 2413, 2573, 2741, 2917, 3101, 3294, 3494, 3703, 3920, 4146, 4379, 4621, 4871, 5129},
{898, 902, 914, 934, 963, 1000, 1045, 1098, 1160, 1229, 1307, 1393, 1487, 1590, 1700, 1819, 1946, 2081, 2225, 2376, 2536, 2704, 2880, 3064, 3257, 3458, 3666, 3884, 4109, 4342, 4584, 4834, 5092},
{853, 857, 869, 889, 918, 955, 1000, 1053, 1115, 1184, 1262, 1348, 1442, 1545, 1655, 1774, 1901, 2036, 2180, 2331, 2491, 2659, 2835, 3019, 3212, 3413, 3621, 3839, 4064, 4297, 4539, 4789, 5047},
{799, 803, 816, 836, 865, 902, 947, 1000, 1061, 1131, 1209, 1295, 1389, 1492, 1602, 1721, 1848, 1983, 2126, 2278, 2438, 2606, 2782, 2966, 3159, 3359, 3568, 3785, 4011, 4244, 4486, 4736, 4994},
{738, 742, 754, 775, 803, 840, 885, 939, 1000, 1070, 1147, 1233, 1328, 1430, 1541, 1659, 1786, 1922, 2065, 2217, 2376, 2544, 2720, 2905, 3097, 3298, 3507, 3724, 3949, 4183, 4424, 4674, 4932},
{668, 672, 685, 705, 734, 771, 816, 869, 930, 1000, 1078, 1164, 1258, 1360, 1471, 1590, 1717, 1852, 1995, 2147, 2307, 2475, 2651, 2835, 3028, 3228, 3437, 3654, 3879, 4113, 4355, 4604, 4863},
{590, 594, 607, 627, 656, 693, 738, 791, 853, 922, 1000, 1086, 1180, 1283, 1393, 1512, 1639, 1774, 1918, 2069, 2229, 2397, 2573, 2757, 2950, 3150, 3359, 3576, 3802, 4035, 4277, 4527, 4785},
{504, 508, 521, 541, 570, 607, 652, 705, 767, 836, 914, 1000, 1094, 1197, 1307, 1426, 1553, 1688, 1831, 1983, 2143, 2311, 2487, 2671, 2864, 3064, 3273, 3490, 3716, 3949, 4191, 4441, 4699},
{410, 414, 427, 447, 476, 513, 558, 611, 672, 742, 820, 906, 1000, 1102, 1213, 1332, 1459, 1594, 1737, 1889, 2049, 2217, 2393, 2577, 2769, 2970, 3179, 3396, 3621, 3855, 4097, 4346, 4604},
{308, 312, 324, 345, 373, 410, 455, 508, 570, 640, 717, 803, 898, 1000, 1111, 1229, 1356, 1492, 1635, 1786, 1946, 2114, 2290, 2475, 2667, 2868, 3077, 3294, 3519, 3753, 3994, 4244, 4502},
{197, 201, 214, 234, 263, 300, 345, 398, 459, 529, 607, 693, 787, 889, 1000, 1119, 1246, 1381, 1524, 1676, 1836, 2004, 2180, 2364, 2556, 2757, 2966, 3183, 3408, 3642, 3884, 4133, 4391},
{78, 82, 95, 115, 144, 181, 226, 279, 341, 410, 488, 574, 668, 771, 881, 1000, 1127, 1262, 1406, 1557, 1717, 1885, 2061, 2245, 2438, 2638, 2847, 3064, 3290, 3523, 3765, 4015, 4273},
{-49, -44, -32, -12, 17, 54, 99, 152, 214, 283, 361, 447, 541, 644, 754, 873, 1000, 1135, 1279, 1430, 1590, 1758, 1934, 2118, 2311, 2511, 2720, 2937, 3163, 3396, 3638, 3888, 4146},
{-184, -180, -167, -147, -118, -81, -36, 17, 78, 148, 226, 312, 406, 508, 619, 738, 865, 1000, 1143, 1295, 1455, 1623, 1799, 1983, 2176, 2376, 2585, 2802, 3028, 3261, 3503, 3753, 4011},
{-327, -323, -311, -290, -262, -225, -180, -126, -65, 5, 82, 169, 263, 365, 476, 594, 721, 857, 1000, 1152, 1311, 1479, 1655, 1840, 2032, 2233, 2442, 2659, 2884, 3118, 3359, 3609, 3867},
{-479, -475, -462, -442, -413, -376, -331, -278, -217, -147, -69, 17, 111, 214, 324, 443, 570, 705, 848, 1000, 1160, 1328, 1504, 1688, 1881, 2081, 2290, 2507, 2733, 2966, 3208, 3458, 3716},
{-638, -634, -622, -602, -573, -536, -491, -438, -376, -307, -229, -143, -49, 54, 164, 283, 410, 545, 689, 840, 1000, 1168, 1344, 1528, 1721, 1922, 2130, 2348, 2573, 2806, 3048, 3298, 3556},
{-806, -802, -790, -769, -741, -704, -659, -606, -544, -475, -397, -311, -217, -114, -4, 115, 242, 377, 521, 672, 832, 1000, 1176, 1360, 1553, 1754, 1963, 2180, 2405, 2638, 2880, 3130, 3388},
{-982, -978, -966, -946, -917, -880, -835, -782, -720, -651, -573, -487, -393, -290, -180, -61, 66, 201, 345, 496, 656, 824, 1000, 1184, 1377, 1578, 1786, 2004, 2229, 2462, 2704, 2954, 3212},
{-1167, -1163, -1150, -1130, -1101, -1064, -1019, -966, -905, -835, -757, -671, -577, -475, -364, -245, -118, 17, 160, 312, 472, 640, 816, 1000, 1193, 1393, 1602, 1819, 2044, 2278, 2520, 2769, 3028},
{-1359, -1355, -1343, -1322, -1294, -1257, -1212, -1159, -1097, -1028, -950, -864, -769, -667, -556, -438, -311, -176, -32, 119, 279, 447, 623, 807, 1000, 1201, 1410, 1627, 1852, 2085, 2327, 2577, 2835},
{-1560, -1556, -1544, -1523, -1494, -1458, -1413, -1359, -1298, -1228, -1150, -1064, -970, -868, -757, -638, -511, -376, -233, -81, 78, 246, 422, 607, 799, 1000, 1209, 1426, 1651, 1885, 2126, 2376, 2634},
{-1769, -1765, -1753, -1732, -1703, -1666, -1621, -1568, -1507, -1437, -1359, -1273, -1179, -1077, -966, -847, -720, -585, -442, -290, -130, 37, 214, 398, 590, 791, 1000, 1217, 1442, 1676, 1918, 2167, 2425},
{-1986, -1982, -1970, -1949, -1920, -1884, -1839, -1785, -1724, -1654, -1576, -1490, -1396, -1294, -1183, -1064, -937, -802, -659, -507, -348, -180, -4, 181, 373, 574, 783, 1000, 1225, 1459, 1700, 1950, 2208},
{-2211, -2207, -2195, -2174, -2146, -2109, -2064, -2011, -1949, -1879, -1802, -1716, -1621, -1519, -1408, -1290, -1163, -1028, -884, -733, -573, -405, -229, -44, 148, 349, 558, 775, 1000, 1233, 1475, 1725, 1983},
{-2445, -2441, -2428, -2408, -2379, -2342, -2297, -2244, -2183, -2113, -2035, -1949, -1855, -1753, -1642, -1523, -1396, -1261, -1118, -966, -806, -638, -462, -278, -85, 115, 324, 541, 767, 1000, 1242, 1492, 1750},
{-2686, -2682, -2670, -2650, -2621, -2584, -2539, -2486, -2424, -2355, -2277, -2191, -2097, -1994, -1884, -1765, -1638, -1503, -1359, -1208, -1048, -880, -704, -520, -327, -126, 82, 300, 525, 758, 1000, 1250, 1508},
{-2936, -2932, -2920, -2899, -2871, -2834, -2789, -2736, -2674, -2604, -2527, -2441, -2346, -2244, -2133, -2015, -1888, -1753, -1609, -1458, -1298, -1130, -954, -769, -577, -376, -167, 50, 275, 508, 750, 1000, 1258},
{-3194, -3190, -3178, -3157, -3129, -3092, -3047, -2994, -2932, -2863, -2785, -2699, -2604, -2502, -2391, -2273, -2146, -2011, -1867, -1716, -1556, -1388, -1212, -1028, -835, -634, -425, -208, 17, 250, 492, 742, 1000}
};


const Sint16 __attribute__ ((space(psv))) array_y_from_d0_d1 [33][33]=
{
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2902, 2880, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2859, 2762, 2746, 2806, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2831, 2696, 2634, 2616, 2645, 2749, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2811, 2650, 2561, 2509, 2488, 2502, 2560, 2698, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2796, 2617, 2509, 2434, 2386, 2362, 2365, 2401, 2482, 2650, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2787, 2594, 2472, 2381, 2314, 2266, 2238, 2233, 2253, 2307, 2409, 2605, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2781, 2579, 2447, 2345, 2262, 2197, 2149, 2117, 2104, 2113, 2148, 2218, 2340, 2562, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2780, 2572, 2433, 2321, 2228, 2149, 2085, 2034, 1999, 1979, 1978, 1999, 2048, 2133, 2272, 2520, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2781, 2572, 2428, 2310, 2208, 2119, 2042, 1977, 1923, 1883, 1858, 1848, 1857, 1890, 1950, 2049, 2206, 2479, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, 2787, 2579, 2433, 2310, 2201, 2104, 2017, 1940, 1873, 1817, 1772, 1740, 1723, 1722, 1741, 1783, 1855, 1968, 2142, 2439, BAD, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, 2796, 2594, 2447, 2321, 2208, 2104, 2009, 1922, 1844, 1774, 1714, 1665, 1627, 1602, 1592, 1599, 1627, 1679, 1762, 1888, 2078, 2399, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, 2811, 2617, 2472, 2345, 2228, 2119, 2017, 1922, 1834, 1754, 1681, 1617, 1563, 1519, 1487, 1468, 1465, 1479, 1515, 1576, 1671, 1809, 2016, 2360, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, 2831, 2650, 2509, 2381, 2262, 2149, 2042, 1940, 1844, 1754, 1670, 1594, 1525, 1466, 1416, 1377, 1350, 1337, 1340, 1362, 1405, 1476, 1580, 1731, 1954, 2321, BAD, BAD, BAD, BAD},
{BAD, BAD, 2859, 2696, 2561, 2434, 2314, 2197, 2085, 1977, 1873, 1774, 1681, 1594, 1513, 1440, 1374, 1318, 1272, 1238, 1216, 1208, 1217, 1245, 1297, 1376, 1491, 1654, 1892, 2282, BAD, BAD, BAD},
{BAD, 2902, 2762, 2634, 2509, 2386, 2266, 2149, 2034, 1923, 1817, 1714, 1617, 1525, 1440, 1361, 1290, 1227, 1174, 1132, 1101, 1083, 1081, 1096, 1131, 1189, 1277, 1402, 1578, 1831, 2244, BAD, BAD},
{BAD, 2880, 2746, 2616, 2488, 2362, 2238, 2117, 1999, 1883, 1772, 1665, 1563, 1466, 1374, 1290, 1213, 1144, 1083, 1033, 993, 966, 953, 955, 976, 1017, 1083, 1179, 1314, 1502, 1770, 2206, BAD},
{BAD, BAD, 2806, 2645, 2502, 2365, 2233, 2104, 1979, 1858, 1740, 1627, 1519, 1416, 1318, 1227, 1144, 1067, 1000, 941, 893, 857, 833, 824, 831, 857, 904, 977, 1082, 1227, 1426, 1710, 2168},
{BAD, BAD, BAD, 2749, 2560, 2401, 2253, 2113, 1978, 1848, 1723, 1602, 1487, 1377, 1272, 1174, 1083, 1000, 924, 858, 801, 756, 722, 702, 696, 708, 739, 792, 872, 985, 1140, 1351, 1650},
{BAD, BAD, BAD, BAD, 2698, 2482, 2307, 2148, 1999, 1857, 1722, 1592, 1468, 1350, 1238, 1132, 1033, 941, 858, 783, 718, 663, 619, 588, 571, 569, 585, 622, 681, 768, 889, 1053, 1276},
{BAD, BAD, BAD, BAD, BAD, 2650, 2409, 2218, 2048, 1890, 1741, 1599, 1465, 1337, 1216, 1101, 993, 893, 801, 718, 643, 579, 525, 484, 455, 441, 443, 464, 505, 570, 664, 793, 967},
{BAD, BAD, BAD, BAD, BAD, BAD, 2605, 2340, 2133, 1950, 1783, 1627, 1479, 1340, 1208, 1083, 966, 857, 756, 663, 579, 505, 441, 389, 349, 323, 312, 318, 343, 389, 460, 561, 698},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2562, 2272, 2049, 1855, 1679, 1515, 1362, 1217, 1081, 953, 833, 722, 619, 525, 441, 368, 305, 254, 216, 192, 184, 193, 222, 273, 350, 458},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2520, 2206, 1968, 1762, 1576, 1405, 1245, 1096, 955, 824, 702, 588, 484, 389, 305, 231, 169, 119, 83, 62, 56, 69, 102, 158, 241},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2479, 2142, 1888, 1671, 1476, 1297, 1131, 976, 831, 696, 571, 455, 349, 254, 169, 95, 34, -15, -49, -68, -71, -55, -17, 44},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2439, 2078, 1809, 1580, 1376, 1189, 1017, 857, 708, 569, 441, 323, 216, 119, 34, -40, -101, -148, -181, -198, -198, -178, -137},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2399, 2016, 1731, 1491, 1277, 1083, 904, 739, 585, 443, 312, 192, 83, -15, -101, -174, -235, -281, -312, -327, -324, -301},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2360, 1954, 1654, 1402, 1179, 977, 792, 622, 464, 318, 184, 62, -49, -148, -235, -308, -368, -413, -443, -456, -450},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2321, 1892, 1578, 1314, 1082, 872, 681, 505, 343, 193, 56, -68, -181, -281, -368, -442, -501, -545, -573, -584},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2282, 1831, 1502, 1227, 985, 768, 570, 389, 222, 69, -71, -198, -312, -413, -501, -575, -634, -677, -704},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2244, 1770, 1426, 1140, 889, 664, 460, 273, 102, -55, -198, -327, -443, -545, -634, -708, -766, -808},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2206, 1710, 1351, 1053, 793, 561, 350, 158, -17, -178, -324, -456, -573, -677, -766, -840, -898},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2168, 1650, 1276, 967, 698, 458, 241, 44, -137, -301, -450, -584, -704, -808, -898, -972}
};


//d0 et d1 en [mm*128]
bool_e find_x_y_from_d0_d1(Sint16 * x, Sint16 * y, Uint8 d0, Uint8 d1)
{
	if(d0 > 32 || d1 > 32)
	{
		*x = BAD;
		*y = BAD;
		return FALSE;		//sécurité !
	}	
	unsigned psv_shadow;
	psv_shadow = PSVPAG;
	PSVPAG = __builtin_psvpage (array_x_from_d0_d1);
	*x = array_x_from_d0_d1[d0][d1];
	PSVPAG = __builtin_psvpage (array_y_from_d0_d1);
	*y = array_y_from_d0_d1[d0][d1];
	PSVPAG = psv_shadow;
	if(*x == BAD || *y == BAD)
		return FALSE;
	return TRUE;
}




const Sint16 __attribute__ ((space(psv))) array_xa_from_d0_d2 [33][33]=
{
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1886, 1894, BAD, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1808, 1745, 1767, 1861, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1741, 1637, 1616, 1641, 1710, 1845, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1680, 1546, 1498, 1489, 1513, 1571, 1669, 1836, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1623, 1466, 1396, 1365, 1362, 1385, 1434, 1515, 1637, 1832, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1569, 1393, 1306, 1257, 1235, 1235, 1256, 1299, 1368, 1467, 1610, 1831, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1517, 1326, 1225, 1162, 1124, 1106, 1107, 1126, 1165, 1224, 1309, 1425, 1587, 1831, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1468, 1263, 1151, 1076, 1025, 993, 978, 979, 996, 1030, 1083, 1156, 1256, 1387, 1566, 1833},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1421, 1205, 1083, 998, 936, 892, 863, 850, 850, 865, 895, 942, 1007, 1093, 1206, 1352, 1547},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1375, 1151, 1021, 927, 855, 801, 761, 735, 722, 721, 734, 760, 802, 860, 936, 1034, 1159, 1319},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1331, 1100, 963, 861, 782, 719, 670, 633, 608, 595, 593, 603, 626, 662, 714, 782, 868, 977, 1114},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1288, 1052, 910, 802, 716, 645, 587, 541, 506, 482, 468, 464, 472, 491, 523, 569, 629, 707, 803, 923},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1247, 1008, 861, 748, 656, 579, 514, 459, 415, 381, 356, 341, 336, 341, 357, 385, 425, 479, 548, 635, 741},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1208, 967, 817, 700, 602, 519, 448, 386, 334, 291, 257, 232, 215, 208, 211, 224, 247, 283, 330, 392, 470, 565},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1170, 929, 777, 657, 555, 467, 389, 322, 263, 212, 169, 135, 108, 90, 81, 81, 91, 110, 141, 183, 238, 308, 393},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1134, 895, 742, 619, 513, 421, 339, 265, 200, 142, 92, 49, 14, -14, -33, -45, -48, -42, -26, 0, 37, 86, 149, 225},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1099, 864, 711, 586, 478, 382, 295, 217, 146, 82, 25, -26, -69, -105, -135, -156, -170, -176, -173, -161, -139, -107, -64, -8, 61},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1067, 837, 685, 560, 449, 350, 260, 177, 100, 31, -33, -90, -141, -185, -223, -254, -278, -294, -303, -303, -295, -277, -250, -212, -163, -101},
{BAD, BAD, BAD, BAD, BAD, BAD, 1036, 814, 665, 539, 427, 326, 232, 145, 64, -11, -80, -144, -201, -253, -299, -338, -371, -397, -417, -428, -432, -428, -414, -392, -359, -316, -260},
{BAD, BAD, BAD, BAD, BAD, 1008, 796, 650, 525, 413, 309, 213, 122, 37, -43, -117, -187, -251, -310, -363, -410, -451, -487, -515, -537, -552, -559, -559, -549, -531, -504, -466, -417},
{BAD, BAD, BAD, BAD, 983, 784, 643, 520, 407, 302, 203, 109, 20, -65, -144, -219, -289, -354, -415, -469, -519, -562, -600, -631, -656, -674, -685, -688, -683, -669, -647, -614, -572},
{BAD, BAD, BAD, 962, 780, 644, 523, 411, 305, 203, 106, 13, -75, -160, -240, -316, -387, -454, -516, -573, -624, -670, -711, -745, -773, -794, -808, -815, -815, -805, -788, -761, -724},
{BAD, BAD, 948, 785, 657, 539, 427, 319, 216, 116, 19, -74, -163, -249, -330, -408, -481, -549, -613, -673, -727, -775, -819, -856, -887, -912, -930, -941, -944, -939, -926, -904, -873},
{BAD, 944, 808, 687, 572, 459, 350, 243, 140, 39, -59, -153, -244, -331, -414, -494, -569, -640, -707, -769, -826, -877, -924, -964, -999, -1027, -1049, -1064, -1071, -1071, -1063, -1046, -1020},
{BAD, 872, 750, 631, 515, 402, 291, 182, 77, -26, -126, -223, -316, -406, -492, -574, -652, -726, -796, -861, -921, -976, -1025, -1069, -1107, -1139, -1165, -1184, -1196, -1200, -1196, -1185, -1164},
{BAD, BAD, 760, 617, 489, 368, 251, 137, 27, -80, -183, -283, -380, -473, -563, -648, -730, -807, -880, -948, -1011, -1070, -1123, -1171, -1213, -1248, -1278, -1301, -1317, -1326, -1328, -1321, -1306},
{BAD, BAD, BAD, 665, 501, 361, 233, 110, -7, -120, -229, -334, -435, -533, -626, -715, -801, -882, -958, -1030, -1098, -1160, -1217, -1268, -1314, -1354, -1388, -1415, -1436, -1450, -1456, -1454, -1444},
{BAD, BAD, BAD, BAD, 578, 393, 242, 105, -23, -145, -261, -373, -480, -582, -681, -775, -865, -950, -1031, -1107, -1179, -1245, -1306, -1362, -1412, -1456, -1494, -1526, -1551, -1570, -1581, -1584, -1579},
{BAD, BAD, BAD, BAD, BAD, 495, 291, 128, -17, -152, -278, -398, -513, -622, -726, -826, -921, -1012, -1097, -1178, -1254, -1325, -1390, -1451, -1505, -1554, -1597, -1633, -1663, -1686, -1702, -1711, -1711},
{BAD, BAD, BAD, BAD, BAD, BAD, 415, 192, 18, -136, -277, -408, -532, -649, -761, -867, -969, -1065, -1156, -1242, -1323, -1399, -1469, -1534, -1594, -1647, -1695, -1736, -1771, -1799, -1820, -1834, -1840},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, 337, 96, -90, -252, -399, -535, -663, -784, -898, -1006, -1109, -1207, -1299, -1385, -1466, -1542, -1612, -1677, -1735, -1788, -1834, -1874, -1907, -1934, -1953, -1964},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 260, 2, -195, -365, -519, -660, -792, -916, -1033, -1144, -1248, -1347, -1440, -1527, -1608, -1684, -1754, -1818, -1876, -1927, -1973, -2011, -2043, -2067, -2085}
};


const Sint16 __attribute__ ((space(psv))) array_ya_from_d0_d2 [33][33]=
{
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2941, 3072, BAD, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2831, 2980, 3107, 3215, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2717, 2874, 3010, 3135, 3251, 3351, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2601, 2762, 2902, 3033, 3159, 3279, 3391, 3485, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2483, 2647, 2788, 2921, 3051, 3177, 3300, 3417, 3527, 3618, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2365, 2530, 2670, 2804, 2935, 3063, 3190, 3315, 3436, 3553, 3662, 3749, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2245, 2410, 2550, 2683, 2813, 2942, 3070, 3198, 3324, 3449, 3571, 3688, 3795, 3880, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2125, 2289, 2427, 2559, 2688, 2816, 2944, 3072, 3200, 3328, 3455, 3581, 3703, 3820, 3927, 4010},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2004, 2166, 2302, 2432, 2559, 2686, 2813, 2940, 3068, 3197, 3326, 3456, 3584, 3711, 3834, 3952, 4059},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1883, 2042, 2176, 2303, 2428, 2552, 2677, 2804, 2931, 3059, 3189, 3319, 3450, 3581, 3711, 3840, 3965, 4084},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1761, 1917, 2048, 2172, 2294, 2416, 2539, 2663, 2789, 2916, 3045, 3175, 3307, 3439, 3573, 3706, 3838, 3968, 4094},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1639, 1791, 1918, 2038, 2157, 2276, 2397, 2519, 2642, 2768, 2895, 3025, 3156, 3289, 3423, 3558, 3693, 3829, 3963, 4095},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1516, 1664, 1787, 1903, 2019, 2135, 2252, 2371, 2492, 2616, 2741, 2869, 2999, 3131, 3265, 3401, 3538, 3675, 3813, 3951, 4088},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1393, 1536, 1654, 1767, 1878, 1991, 2105, 2221, 2339, 2460, 2583, 2709, 2838, 2968, 3101, 3236, 3373, 3511, 3651, 3792, 3932, 4073},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1269, 1406, 1520, 1628, 1736, 1844, 1955, 2068, 2183, 2301, 2421, 2545, 2671, 2800, 2931, 3065, 3201, 3340, 3479, 3621, 3764, 3907, 4051},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1144, 1276, 1384, 1488, 1591, 1696, 1802, 1912, 2024, 2138, 2256, 2377, 2501, 2627, 2757, 2889, 3024, 3161, 3300, 3442, 3585, 3730, 3876, 4022},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1019, 1144, 1247, 1346, 1445, 1545, 1648, 1753, 1861, 1973, 2087, 2205, 2326, 2450, 2577, 2707, 2840, 2976, 3114, 3255, 3398, 3543, 3690, 3838, 3987},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, 894, 1011, 1108, 1202, 1296, 1392, 1490, 1592, 1696, 1804, 1915, 2030, 2148, 2269, 2394, 2521, 2652, 2786, 2923, 3062, 3204, 3349, 3495, 3644, 3794, 3945},
{BAD, BAD, BAD, BAD, BAD, BAD, 767, 877, 967, 1056, 1145, 1236, 1330, 1427, 1528, 1632, 1740, 1851, 1966, 2084, 2206, 2331, 2460, 2591, 2726, 2864, 3004, 3147, 3293, 3441, 3591, 3744, 3897},
{BAD, BAD, BAD, BAD, BAD, 640, 741, 825, 907, 991, 1078, 1167, 1260, 1357, 1457, 1561, 1669, 1781, 1896, 2014, 2137, 2262, 2392, 2524, 2660, 2798, 2940, 3085, 3232, 3381, 3533, 3687, 3843},
{BAD, BAD, BAD, BAD, 512, 603, 680, 756, 835, 916, 1001, 1090, 1182, 1279, 1379, 1483, 1591, 1703, 1819, 1938, 2061, 2187, 2317, 2451, 2587, 2727, 2870, 3016, 3164, 3315, 3469, 3625, 3783},
{BAD, BAD, BAD, 382, 462, 532, 602, 675, 752, 832, 916, 1004, 1097, 1193, 1294, 1398, 1507, 1619, 1735, 1855, 1979, 2106, 2237, 2371, 2509, 2650, 2794, 2941, 3091, 3243, 3399, 3556, 3716},
{BAD, BAD, 251, 318, 380, 444, 511, 583, 658, 738, 822, 911, 1003, 1100, 1201, 1306, 1415, 1528, 1645, 1765, 1890, 2018, 2150, 2285, 2424, 2566, 2711, 2860, 3011, 3165, 3322, 3481, 3643},
{BAD, 115, 169, 223, 280, 342, 409, 480, 555, 635, 720, 808, 902, 999, 1100, 1206, 1316, 1430, 1548, 1669, 1795, 1924, 2057, 2193, 2333, 2476, 2623, 2772, 2925, 3081, 3239, 3400, 3563},
{BAD, 5, 54, 107, 165, 228, 295, 366, 443, 523, 608, 698, 792, 890, 993, 1099, 1210, 1325, 1443, 1566, 1692, 1823, 1957, 2094, 2235, 2380, 2528, 2679, 2833, 2990, 3150, 3312, 3478},
{BAD, BAD, -88, -27, 35, 100, 169, 242, 320, 402, 488, 579, 674, 773, 877, 985, 1096, 1212, 1332, 1456, 1584, 1715, 1850, 1989, 2131, 2277, 2426, 2578, 2734, 2893, 3054, 3219, 3385},
{BAD, BAD, BAD, -188, -114, -43, 30, 106, 186, 270, 359, 451, 548, 648, 753, 862, 975, 1092, 1214, 1339, 1467, 1600, 1737, 1877, 2020, 2167, 2318, 2472, 2629, 2789, 2952, 3118, 3287},
{BAD, BAD, BAD, BAD, -290, -204, -123, -42, 42, 129, 219, 314, 412, 515, 621, 732, 846, 965, 1088, 1214, 1344, 1478, 1616, 1758, 1903, 2051, 2203, 2359, 2517, 2679, 2844, 3011, 3182},
{BAD, BAD, BAD, BAD, BAD, -393, -295, -205, -116, -25, 69, 167, 268, 372, 481, 593, 710, 830, 954, 1082, 1214, 1349, 1489, 1632, 1778, 1928, 2082, 2239, 2399, 2562, 2728, 2898, 3070},
{BAD, BAD, BAD, BAD, BAD, BAD, -498, -388, -289, -191, -92, 9, 113, 220, 331, 446, 564, 687, 812, 942, 1076, 1213, 1354, 1498, 1646, 1798, 1953, 2112, 2273, 2438, 2607, 2778, 2952},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, -603, -481, -373, -267, -161, -53, 58, 172, 290, 410, 535, 663, 794, 930, 1069, 1211, 1358, 1508, 1661, 1818, 1978, 2141, 2308, 2478, 2651, 2827},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, -708, -576, -458, -344, -230, -115, 3, 124, 247, 374, 505, 638, 776, 917, 1062, 1210, 1361, 1516, 1675, 1837, 2002, 2171, 2342, 2517, 2695}
};




const Sint16 __attribute__ ((space(psv))) array_xb_from_d0_d2 [33][33]=
{
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2056, 2128, BAD, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2052, 2192, 2250, 2240, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2038, 2215, 2313, 2369, 2383, 2335, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2017, 2220, 2343, 2428, 2485, 2511, 2499, 2422, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1992, 2216, 2356, 2461, 2541, 2598, 2632, 2639, 2607, 2505, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1964, 2204, 2357, 2477, 2573, 2650, 2709, 2749, 2767, 2758, 2709, 2585, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1933, 2186, 2350, 2480, 2589, 2681, 2757, 2818, 2863, 2890, 2895, 2872, 2808, 2663, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1901, 2163, 2335, 2475, 2593, 2695, 2784, 2860, 2923, 2973, 3007, 3023, 3017, 2982, 2904, 2740},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1866, 2136, 2315, 2461, 2587, 2698, 2797, 2884, 2961, 3026, 3080, 3120, 3145, 3152, 3136, 3090, 2998},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1830, 2105, 2289, 2440, 2573, 2691, 2797, 2894, 2981, 3059, 3126, 3183, 3229, 3261, 3278, 3277, 3252, 3195},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1792, 2071, 2258, 2414, 2551, 2674, 2787, 2891, 2987, 3074, 3153, 3223, 3283, 3334, 3373, 3398, 3408, 3399, 3365},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1753, 2033, 2223, 2381, 2522, 2650, 2768, 2878, 2980, 3075, 3163, 3244, 3316, 3380, 3435, 3480, 3513, 3532, 3535, 3519},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1712, 1992, 2183, 2343, 2487, 2618, 2740, 2855, 2963, 3065, 3160, 3249, 3331, 3406, 3473, 3533, 3582, 3622, 3649, 3663, 3660},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1669, 1948, 2139, 2300, 2445, 2579, 2705, 2823, 2936, 3043, 3144, 3240, 3330, 3414, 3492, 3563, 3626, 3681, 3726, 3761, 3784, 3792},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1625, 1900, 2090, 2252, 2398, 2533, 2661, 2783, 2900, 3011, 3117, 3219, 3316, 3408, 3494, 3574, 3648, 3715, 3775, 3826, 3867, 3898, 3916},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1579, 1849, 2037, 2198, 2344, 2481, 2611, 2735, 2854, 2969, 3080, 3187, 3289, 3387, 3481, 3569, 3652, 3730, 3801, 3865, 3921, 3969, 4006, 4033},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1532, 1795, 1979, 2139, 2284, 2421, 2552, 2678, 2800, 2918, 3033, 3144, 3251, 3354, 3454, 3549, 3640, 3726, 3807, 3882, 3950, 4012, 4065, 4109, 4144},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1483, 1737, 1917, 2073, 2218, 2355, 2486, 2614, 2737, 2858, 2975, 3090, 3201, 3310, 3415, 3516, 3613, 3707, 3796, 3880, 3958, 4031, 4097, 4156, 4207, 4248},
{BAD, BAD, BAD, BAD, BAD, BAD, 1431, 1674, 1849, 2002, 2145, 2281, 2413, 2541, 2666, 2788, 2908, 3026, 3141, 3253, 3363, 3469, 3573, 3673, 3769, 3861, 3948, 4030, 4107, 4178, 4242, 4299, 4347},
{BAD, BAD, BAD, BAD, BAD, 1377, 1607, 1775, 1924, 2064, 2199, 2330, 2459, 2585, 2709, 2831, 2951, 3069, 3185, 3299, 3410, 3519, 3624, 3727, 3826, 3921, 4011, 4098, 4179, 4254, 4323, 4385, 4440},
{BAD, BAD, BAD, BAD, 1320, 1534, 1694, 1838, 1975, 2108, 2239, 2367, 2494, 2619, 2743, 2865, 2986, 3105, 3223, 3338, 3451, 3562, 3670, 3775, 3877, 3976, 4070, 4160, 4245, 4325, 4399, 4466, 4527},
{BAD, BAD, BAD, 1259, 1454, 1604, 1743, 1876, 2007, 2137, 2265, 2392, 2518, 2644, 2768, 2892, 3014, 3135, 3254, 3371, 3487, 3600, 3711, 3819, 3924, 4025, 4123, 4217, 4306, 4390, 4469, 4542, 4608},
{BAD, BAD, 1192, 1363, 1502, 1635, 1765, 1894, 2022, 2150, 2278, 2405, 2532, 2659, 2785, 2910, 3033, 3156, 3278, 3397, 3515, 3631, 3745, 3856, 3964, 4069, 4171, 4268, 4362, 4451, 4534, 4612, 4684},
{BAD, 1114, 1255, 1384, 1511, 1638, 1765, 1893, 2021, 2150, 2279, 2407, 2536, 2664, 2792, 2919, 3045, 3170, 3294, 3417, 3537, 3656, 3773, 3887, 3999, 4107, 4213, 4314, 4412, 4505, 4594, 4677, 4754},
{BAD, 1106, 1233, 1359, 1487, 1615, 1744, 1874, 2004, 2135, 2266, 2397, 2528, 2659, 2789, 2919, 3048, 3176, 3303, 3428, 3552, 3674, 3794, 3912, 4027, 4139, 4248, 4354, 4456, 4554, 4647, 4735, 4818},
{BAD, BAD, 1139, 1290, 1429, 1566, 1701, 1835, 1970, 2105, 2240, 2374, 2509, 2643, 2776, 2909, 3042, 3173, 3303, 3432, 3559, 3685, 3808, 3930, 4049, 4165, 4278, 4388, 4494, 4597, 4695, 4788, 4876},
{BAD, BAD, BAD, 1155, 1331, 1485, 1632, 1776, 1917, 2058, 2198, 2338, 2477, 2615, 2753, 2890, 3026, 3161, 3295, 3428, 3559, 3688, 3815, 3941, 4064, 4184, 4301, 4415, 4526, 4633, 4736, 4834, 4927},
{BAD, BAD, BAD, BAD, 1164, 1363, 1533, 1691, 1844, 1993, 2140, 2286, 2431, 2575, 2717, 2859, 3000, 3139, 3277, 3414, 3549, 3683, 3815, 3944, 4071, 4196, 4317, 4436, 4551, 4663, 4771, 4874, 4973},
{BAD, BAD, BAD, BAD, BAD, 1168, 1390, 1575, 1744, 1907, 2064, 2218, 2371, 2521, 2670, 2817, 2963, 3107, 3250, 3392, 3531, 3669, 3805, 3939, 4071, 4200, 4326, 4450, 4570, 4686, 4799, 4907, 5011},
{BAD, BAD, BAD, BAD, BAD, BAD, 1169, 1413, 1613, 1794, 1966, 2132, 2293, 2452, 2608, 2762, 2914, 3064, 3212, 3359, 3504, 3647, 3788, 3926, 4063, 4196, 4328, 4456, 4581, 4702, 4820, 4934, 5043},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1169, 1434, 1648, 1841, 2023, 2197, 2365, 2530, 2692, 2851, 3008, 3163, 3316, 3466, 3614, 3761, 3904, 4046, 4185, 4321, 4454, 4584, 4711, 4834, 4953, 5067},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1167, 1453, 1681, 1886, 2077, 2259, 2435, 2607, 2775, 2939, 3101, 3260, 3417, 3572, 3724, 3873, 4020, 4164, 4306, 4444, 4579, 4711, 4840, 4964, 5085}
};

const Sint16 __attribute__ ((space(psv))) array_yb_from_d0_d2 [33][33]=
{
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2885, 2995, BAD, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2749, 2831, 2946, 3088, BAD, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2618, 2682, 2777, 2893, 3027, 3188, BAD, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2488, 2538, 2620, 2720, 2835, 2965, 3114, 3290, BAD, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2360, 2397, 2468, 2556, 2658, 2772, 2900, 3043, 3204, 3393, BAD, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2233, 2259, 2320, 2398, 2489, 2591, 2705, 2831, 2970, 3123, 3295, 3498, BAD, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 2106, 2123, 2175, 2244, 2325, 2417, 2520, 2634, 2758, 2894, 3042, 3205, 3388, 3603, BAD},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1981, 1989, 2033, 2093, 2165, 2248, 2342, 2445, 2557, 2680, 2814, 2958, 3116, 3289, 3481, 3708},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1856, 1856, 1892, 1944, 2009, 2084, 2168, 2262, 2365, 2477, 2598, 2730, 2871, 3025, 3191, 3373, 3576},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1731, 1724, 1753, 1798, 1855, 1922, 1999, 2084, 2178, 2280, 2392, 2512, 2641, 2781, 2931, 3092, 3267, 3458},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1607, 1594, 1616, 1654, 1704, 1764, 1833, 1910, 1996, 2089, 2192, 2302, 2421, 2549, 2686, 2833, 2991, 3161, 3344},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1484, 1464, 1480, 1512, 1555, 1608, 1670, 1740, 1818, 1903, 1997, 2098, 2208, 2326, 2452, 2588, 2732, 2887, 3053, 3230},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1361, 1336, 1346, 1372, 1409, 1455, 1510, 1573, 1643, 1721, 1807, 1900, 2001, 2110, 2227, 2352, 2485, 2628, 2780, 2942, 3115},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1239, 1209, 1213, 1233, 1264, 1304, 1352, 1408, 1472, 1543, 1621, 1706, 1799, 1900, 2007, 2123, 2247, 2379, 2519, 2669, 2828, 2997},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 1117, 1083, 1082, 1097, 1122, 1156, 1198, 1247, 1304, 1368, 1439, 1517, 1602, 1694, 1794, 1901, 2015, 2138, 2268, 2407, 2554, 2710, 2876},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 996, 958, 952, 962, 981, 1009, 1045, 1088, 1139, 1196, 1260, 1331, 1409, 1493, 1585, 1684, 1790, 1904, 2025, 2154, 2290, 2436, 2590, 2753},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, 875, 834, 824, 828, 843, 865, 895, 932, 976, 1027, 1085, 1149, 1219, 1297, 1381, 1472, 1570, 1675, 1788, 1908, 2035, 2170, 2313, 2465, 2626},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, 755, 711, 698, 697, 706, 724, 748, 779, 817, 862, 913, 970, 1034, 1104, 1181, 1265, 1355, 1452, 1557, 1668, 1786, 1912, 2046, 2188, 2337, 2495},
{BAD, BAD, BAD, BAD, BAD, BAD, 635, 590, 573, 568, 572, 584, 603, 629, 661, 699, 744, 795, 852, 916, 986, 1062, 1145, 1235, 1331, 1434, 1544, 1661, 1786, 1918, 2058, 2206, 2362},
{BAD, BAD, BAD, BAD, BAD, 517, 470, 450, 441, 441, 448, 461, 481, 508, 540, 579, 623, 674, 731, 794, 863, 939, 1021, 1110, 1205, 1308, 1416, 1533, 1656, 1786, 1924, 2070, 2224},
{BAD, BAD, BAD, BAD, 399, 353, 330, 317, 312, 314, 323, 337, 358, 384, 417, 455, 499, 550, 606, 669, 738, 813, 894, 982, 1076, 1177, 1285, 1400, 1522, 1651, 1787, 1931, 2083},
{BAD, BAD, BAD, 283, 238, 212, 196, 187, 184, 187, 196, 211, 232, 259, 291, 329, 373, 423, 479, 540, 608, 683, 763, 850, 943, 1043, 1150, 1263, 1384, 1511, 1646, 1789, 1938},
{BAD, BAD, 169, 126, 98, 79, 65, 58, 56, 60, 69, 84, 105, 131, 162, 200, 243, 293, 348, 409, 476, 549, 629, 715, 807, 906, 1011, 1123, 1242, 1368, 1502, 1642, 1790},
{BAD, 59, 20, -10, -33, -51, -63, -70, -72, -68, -59, -45, -25, 1, 32, 69, 111, 160, 214, 274, 340, 413, 491, 576, 667, 765, 869, 980, 1097, 1222, 1354, 1492, 1639},
{BAD, -72, -107, -135, -159, -177, -190, -198, -200, -197, -189, -175, -156, -131, -101, -65, -24, 24, 77, 136, 202, 273, 350, 434, 524, 620, 723, 833, 949, 1072, 1202, 1339, 1484},
{BAD, BAD, -215, -251, -279, -300, -315, -324, -328, -326, -319, -307, -289, -265, -236, -201, -161, -114, -62, -4, 60, 130, 206, 289, 377, 472, 574, 682, 797, 918, 1047, 1182, 1325},
{BAD, BAD, BAD, -351, -391, -417, -436, -449, -455, -456, -450, -439, -423, -401, -373, -340, -300, -255, -204, -147, -85, -16, 59, 140, 228, 321, 422, 528, 641, 761, 888, 1022, 1163},
{BAD, BAD, BAD, BAD, -485, -527, -553, -571, -581, -584, -581, -573, -558, -538, -511, -479, -442, -398, -349, -293, -232, -164, -91, -11, 75, 167, 266, 371, 483, 601, 727, 859, 998},
{BAD, BAD, BAD, BAD, BAD, -618, -662, -688, -703, -711, -711, -706, -693, -675, -651, -621, -585, -543, -495, -441, -381, -315, -243, -165, -81, 10, 107, 211, 321, 438, 562, 692, 829},
{BAD, BAD, BAD, BAD, BAD, BAD, -749, -795, -820, -834, -840, -838, -829, -813, -792, -764, -730, -690, -644, -591, -533, -469, -399, -322, -239, -150, -54, 48, 156, 272, 393, 522, 658},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, -880, -927, -952, -965, -968, -963, -951, -932, -907, -876, -838, -794, -744, -687, -625, -556, -481, -400, -312, -219, -118, -11, 102, 222, 349, 483},
{BAD, BAD, BAD, BAD, BAD, BAD, BAD, BAD, -1010, -1059, -1084, -1094, -1095, -1088, -1073, -1051, -1022, -987, -945, -897, -843, -783, -716, -643, -563, -478, -385, -287, -182, -70, 48, 173, 305}
};



//L'un de ces deux points est le bon...
bool_e find_two_points_from_d0_d2(Sint16 * xa, Sint16 * ya, Sint16 * xb, Sint16 * yb, Uint8 d0, Uint8 d2)
{
	if(d0 > 32 || d2 > 32)
	{
		*xa = BAD;
		*ya = BAD;
		*xb = BAD;
		*yb = BAD;
		
		return FALSE;		//sécurité !
	}	
	unsigned psv_shadow;
	psv_shadow = PSVPAG;
	PSVPAG = __builtin_psvpage (array_xa_from_d0_d2);
	*xa = array_xa_from_d0_d2[d0][d2];
	PSVPAG = __builtin_psvpage (array_ya_from_d0_d2);
	*ya = array_ya_from_d0_d2[d0][d2];
	PSVPAG = __builtin_psvpage (array_xb_from_d0_d2);
	*xb = array_xb_from_d0_d2[d0][d2];
	PSVPAG = __builtin_psvpage (array_yb_from_d0_d2);
	*yb = array_yb_from_d0_d2[d0][d2];

	PSVPAG = psv_shadow;
	
	//L'un des deux points à le droit d'être BAD sans que l'autre ne le soit !
	return TRUE;
}

//L'un de ces deux points est le bon...
bool_e find_two_points_from_d1_d2(Sint16 * xa, Sint16 * ya, Sint16 * xb, Sint16 * yb, Uint8 d1, Uint8 d2)
{
	if(d1 > 32 || d2 > 32)
	{
		*xa = BAD;
		*ya = BAD;
		*xb = BAD;
		*yb = BAD;
		
		return FALSE;		//sécurité !
	}	
	unsigned psv_shadow;
	psv_shadow = PSVPAG;
	
	PSVPAG = __builtin_psvpage (array_xa_from_d0_d2);
	*xa = array_xa_from_d0_d2[d1][d2];				//On réutilise les mêmes tableaux pour d1 mais en effectuant une symétrie par l'axe de la longueur...
	if(*xa != BAD)
		*xa = 2000-*xa;
	
	PSVPAG = __builtin_psvpage (array_ya_from_d0_d2);
	*ya = array_ya_from_d0_d2[d1][d2];

	PSVPAG = __builtin_psvpage (array_xb_from_d0_d2);
	*xb = array_xb_from_d0_d2[d1][d2];
	if(*xb != BAD)
		*xb = 2000-*xb;

	PSVPAG = __builtin_psvpage (array_yb_from_d0_d2);
	*yb = array_yb_from_d0_d2[d1][d2];

	PSVPAG = psv_shadow;
	
	//L'un des deux points à le droit d'être BAD sans que l'autre ne le soit !
	return TRUE;
}


bool_e find_one_point_from_d0_d1_d2(Sint16 * x, Sint16 * y, Uint8 d0, Uint8 d1, Uint8 d2)
{
	/*
		En coupant le terrain en deux dans le sens de la longueur.
		Et en gardant les deux points les plus proches parmi 4
		Pour choisir entre les deux points :
		- Si le point obtenu est "du coté de d1", il faut faire confiance au point obtenu par le find_d0_d2
		- Si le point obtenu est "du coté de d0", il faut faire confiance au point obtenu par le find_d1_d2
	*/
	Sint16 xa02, ya02, xb02, yb02, xa12, ya12, xb12, yb12;
	Sint32 daa, dab, dba, dbb;	//[m*m] Distances au carré...
	find_two_points_from_d0_d2(&xa02, &ya02, &xb02, &yb02, d0, d2);	
	find_two_points_from_d1_d2(&xa12, &ya12, &xb12, &yb12, d1, d2);
	
	//Calcul des distances entre les points ..02 et les points ..12 obtenus
	//(Inutile de prendre la racine de distance au carré que l'on cherche à comparer.)
	#define BAD_D (Sint32)(0x7FFFFFFF)	//Ce "plus grand nombre" sera éliminé des comparaison recherchant le mini !!!
//	printf("A02=(%d,%d) | B02=(%d,%d) | A12=(%d,%d) | B12=(%d,%d)\n", xa02, ya02, xb02, yb02, xa12, ya12, xb12, yb12 );
	
	if(ya02 != BAD && ya12 != BAD && xa02 != BAD && xa12 != BAD)
		daa = (Sint32)(ya02-ya12)*(Sint32)(ya02-ya12)+(Sint32)(xa02-xa12)*(Sint32)(xa02-xa12);	//distance entre les points A02 et A12, au carré
	else
		daa = BAD_D;
	
	if(ya02 != BAD && yb12 != BAD && xa02 != BAD && xb12 != BAD)	
		dab = (Sint32)(ya02-yb12)*(Sint32)(ya02-yb12)+(Sint32)(xa02-xb12)*(Sint32)(xa02-xb12);	//distance entre les points A02 et B12, au carré
	else
		dab = BAD_D;
		
	if(yb02 != BAD && ya12 != BAD && xb02 != BAD && xa12 != BAD)	
		dba = (Sint32)(yb02-ya12)*(Sint32)(yb02-ya12)+(Sint32)(xb02-xa12)*(Sint32)(xb02-xa12);	//distance entre les points B02 et A12, au carré
	else
		dba = BAD_D;
		
	if(yb02 != BAD && yb12 != BAD && xb02 != BAD && xb12 != BAD)	
		dbb = (Sint32)(yb02-yb12)*(Sint32)(yb02-yb12)+(Sint32)(xb02-xb12)*(Sint32)(xb02-xb12);	//distance entre les points B02 et B12, au carré
	else
		dbb = BAD_D;
//	printf("daa=%ld | dab=%ld | dba=%ld | dbb=%ld\n", daa, dab, dba, dbb);	
	
	typedef enum
	{
		DAA,
		DAB,
		DBA,
		DBB,
		DERROR
	}lower_d_e;
	lower_d_e lower_d;
	lower_d = DERROR;
	//Recherche des deux points les plus proches entre les points ..02 et les points ..12
	if(daa != BAD_D || dab != BAD_D || dba != BAD_D || dbb != BAD_D)	//S'il y a au moins une distance qui n'est pas "mauvaise"
	{	
		if(daa < dab)
		{
			if(daa < dba)
			{
				if(daa < dbb)
					lower_d = DAA;
				else
					lower_d = DBB;
			}		
			else
			{
				if(dba < dbb)
					lower_d = DBA;
				else
					lower_d = DBB;
			}		
		}
		else
		{
			if(dab < dba)
			{
				if(dab < dbb)
					lower_d = DAB;
				else
					lower_d = DBB;
			}		
			else
			{
				if(dba < dbb)
					lower_d = DBA;
				else
					lower_d = DBB;
			}
		}
	}	
//	printf("lower_d = %d\n", lower_d );
	switch(lower_d)
	{
		case DAA:	//Les deux "bons" points sont a02 et a12
			if (xa02 < 1000)
			{	//Dans cette zone, a02 est le plus précis, on choisi le point a02
				*x = xa02;
				*y = ya02;
			}
			else if (xa12 > 1000)
			{	//Dans cette zone, a12 est le plus précis, on choisi le point a12
				*x = xa12;
				*y = ya12;
			}
			else
			{	//On choisit une moyenne des deux
				*x = (xa02 + xa12)/2;
				*y = (ya02 + ya12)/2;
			}
		break;
		case DAB:	//Les deux "bons" points sont a02 et b12
			if (xa02 < 1000)
			{	//Dans cette zone, a02 est le plus précis, on choisi le point a02
				*x = xa02;
				*y = ya02;
			}
			else if (xb12 > 1000)
			{	//Dans cette zone, b12 est le plus précis, on choisi le point b12
				*x = xb12;
				*y = yb12;
			}
			else
			{	//On choisit une moyenne des deux
				*x = (xa02 + xb12)/2;
				*y = (ya02 + yb12)/2;
			}
		break;
		case DBA:	//Les deux "bons" points sont b02 et a12
			if (xb02 < 1000)
			{	//Dans cette zone, b02 est le plus précis, on choisi le point b02
				*x = xb02;
				*y = yb02;
			}
			else if (xa12 > 1000)
			{	//Dans cette zone, a12 est le plus précis, on choisi le point a12
				*x = xa12;
				*y = ya12;
			}
			else
			{	//On choisit une moyenne des deux
				*x = (xb02 + xa12)/2;
				*y = (yb02 + ya12)/2;
			}
		break;
		case DBB:	//Les deux "bons" points sont b02 et b12
			if (xb02 < 1000)
			{	//Dans cette zone, b02 est le plus précis, on choisi le point b02
				*x = xb02;
				*y = yb02;
			}
			else if (xb12 > 1000)
			{	//Dans cette zone, b12 est le plus précis, on choisi le point b12
				*x = xb12;
				*y = yb12;
			}
			else
			{	//On choisit une moyenne des deux
				*x = (xb02 + xb12)/2;
				*y = (yb02 + yb12)/2;
			}
		break;
		case DERROR: //no break
		default:
			*x = BAD;
			*y = BAD;
		break;
	}
	
	//Si l'algo utilisant d0, d1, d2 n'a rien trouvé... c'est probablement qu'on est à proximité des segments [2,0] ou [2,1]
	//Dans ce cas, faisons appel à l'algo utilisant seulement d0 et d1
	if (*x == BAD || *y == BAD)
	{
		find_x_y_from_d0_d1(x, y, d0, d1);
	//	printf("%d %d %d %d %d\n",d0, d1, d2, *x, *y);
	}	
	
	if (*x == BAD || *y == BAD)
		return FALSE;
	else
		return TRUE;	

}	



//#define TESTS_ENABLE
#ifdef TESTS_ENABLE

	void f(Uint8 d0, Uint8 d1, Uint8 d2)
	{
		Sint16 x, y;
		find_one_point_from_d0_d1_d2(&x, &y, d0, d1, d2);
		printf("%d %d %d %d %d\n", (Uint16)(d0)*128, (Uint16)(d1)*128, (Uint16)(d2)*128, (x==BAD)?0:x, (y==BAD)?0:y);
		#warning "todo : le test actuel ne fonctionne pas... il faut comparer les 4 points obtenus avec ceux sensés être obtenus et vérifier l'algo de choix des points...)"
		/*find_x_y_from_d0_d1(&x, &y, d0, d1);
		printf("%d %d %d %d\n", (Uint16)(d0)*128, (Uint16)(d1)*128, (x==BAD)?0:x, (y==BAD)?0:y);
		*/
	}

		
	void ARRAY_US_tests(void)	//ATTENTION, fonction blocante.
	{
		Sint16 x, y, xa, xb, ya, yb;
		Uint8 d0, d1, d2;
		UART_init();
		/*
		for(d1 = 0; d1<32; d1++)
		{
			for(d0 = 0; d0<32; d0++)
			{
				find_x_y_from_d0_d1(&x, &y, d0, d1);
				//printf("d0:%d d1:%d x=%d y=%d\n", (Uint16)(d0)*128, (Uint16)(d1)*128, (x=BAD)?0;x, (y=BAD)?0:y);
				printf("%d %d %d %d\n", (Uint16)(d0)*128, (Uint16)(d1)*128, (x==BAD)?0:x, (y==BAD)?0:y);
			}
		}
		*/
		/*
		for(d2 = 0; d2<32; d2++)
		{
			for(d0 = 0; d0<32; d0++)
			{
				find_two_points_from_d0_d2(&xa, &ya, &xb, &yb, d0, d2);
				printf("%d %d %d %d %d %d\n", (Uint16)(d0)*128, (Uint16)(d2)*128, (xa==BAD)?0:xa, (ya==BAD)?0:ya, (xb==BAD)?0:xb, (yb==BAD)?0:yb);
			}
		}
		*/
		/*
		for(d2 = 0; d2<32; d2++)
		{
			for(d1 = 0; d1<32; d1++)
			{
				find_two_points_from_d1_d2(&xa, &ya, &xb, &yb, d1, d2);
				printf("%d %d %d %d %d %d\n", (Uint16)(d1)*128, (Uint16)(d2)*128, (xa==BAD)?0:xa, (ya==BAD)?0:ya, (xb==BAD)?0:xb, (yb==BAD)?0:yb);
			}
		}
		*/
		for(d2 = 0; d2<32; d2++)
		{
			for(d1 = 0; d1<32; d1++)
			{
				for(d0 = 0; d0<32; d0++)
				{
					f(d0, d1, d2);
				}	
			}
		}
		
		
	//	f(16,2,22);
/*
f(	28	,	23	,	8	);
f(	28	,	23	,	8	);
f(	27	,	22	,	8	);
f(	26	,	21	,	8	);
f(	26	,	20	,	8	);
f(	25	,	20	,	9	);
f(	24	,	19	,	9	);
f(	24	,	18	,	10	);
f(	23	,	17	,	10	);
f(	23	,	16	,	11	);
f(	22	,	16	,	11	);
f(	22	,	15	,	12	);
f(	21	,	14	,	12	);
f(	21	,	13	,	13	);
f(	20	,	13	,	13	);
f(	20	,	12	,	14	);
f(	19	,	11	,	15	);
f(	19	,	10	,	15	);
f(	18	,	9	,	16	);
f(	18	,	9	,	17	);
f(	17	,	8	,	17	);
f(	17	,	7	,	18	);
f(	17	,	6	,	19	);
f(	17	,	5	,	20	);
f(	16	,	5	,	20	);
f(	16	,	4	,	21	);
f(	16	,	3	,	22	);
f(	16	,	2	,	22	);
f(	16	,	2	,	23	);
f(	16	,	1	,	24	);
f(	16	,	0	,	25	);
f(	28	,	23	,	7	);
f(	27	,	23	,	7	);
f(	26	,	22	,	7	);
f(	26	,	21	,	7	);
f(	25	,	20	,	8	);
f(	25	,	20	,	8	);
f(	24	,	19	,	8	);
f(	23	,	18	,	9	);
f(	23	,	17	,	9	);
f(	22	,	16	,	10	);
f(	22	,	16	,	11	);
f(	21	,	15	,	11	);
f(	20	,	14	,	12	);
f(	20	,	13	,	12	);
f(	19	,	13	,	13	);
f(	19	,	12	,	14	);
f(	18	,	11	,	14	);
f(	18	,	10	,	15	);
f(	18	,	9	,	16	);
f(	17	,	9	,	16	);
f(	17	,	8	,	17	);
f(	16	,	7	,	18	);
f(	16	,	6	,	19	);
f(	16	,	6	,	19	);
f(	16	,	5	,	20	);
f(	15	,	4	,	21	);
f(	15	,	3	,	21	);
f(	15	,	2	,	22	);
f(	15	,	2	,	23	);
f(	15	,	1	,	24	);
f(	15	,	1	,	24	);
f(	27	,	23	,	6	);
f(	27	,	23	,	6	);
f(	26	,	22	,	6	);
f(	25	,	21	,	7	);
f(	25	,	20	,	7	);
f(	24	,	20	,	7	);
f(	23	,	19	,	8	);
f(	23	,	18	,	8	);
f(	22	,	17	,	9	);
f(	22	,	16	,	9	);
f(	21	,	16	,	10	);
f(	20	,	15	,	11	);
f(	20	,	14	,	11	);
f(	19	,	13	,	12	);
f(	19	,	13	,	13	);
f(	18	,	12	,	13	);
f(	18	,	11	,	14	);
f(	17	,	10	,	15	);
f(	17	,	10	,	15	);
f(	16	,	9	,	16	);
f(	16	,	8	,	17	);
f(	16	,	7	,	18	);
f(	15	,	6	,	18	);
f(	15	,	6	,	19	);
f(	15	,	5	,	20	);
f(	15	,	4	,	21	);
f(	14	,	3	,	21	);
f(	14	,	3	,	22	);
f(	14	,	2	,	23	);
f(	14	,	2	,	24	);
f(	14	,	2	,	24	);
f(	27	,	24	,	5	);
f(	26	,	23	,	6	);
f(	26	,	22	,	6	);
f(	25	,	21	,	6	);
f(	24	,	20	,	6	);
f(	24	,	20	,	7	);
f(	23	,	19	,	7	);
f(	22	,	18	,	8	);
f(	22	,	17	,	8	);
f(	21	,	17	,	9	);
f(	21	,	16	,	10	);
f(	20	,	15	,	10	);
f(	19	,	14	,	11	);
f(	19	,	13	,	12	);
f(	18	,	13	,	12	);
f(	18	,	12	,	13	);
f(	17	,	11	,	14	);
f(	17	,	10	,	14	);
f(	16	,	10	,	15	);
f(	16	,	9	,	16	);
f(	15	,	8	,	17	);
f(	15	,	7	,	17	);
f(	15	,	7	,	18	);
f(	14	,	6	,	19	);
f(	14	,	5	,	20	);
f(	14	,	5	,	20	);
f(	14	,	4	,	21	);
f(	13	,	3	,	22	);
f(	13	,	3	,	23	);
f(	13	,	2	,	23	);
f(	13	,	2	,	24	);
f(	27	,	24	,	5	);
f(	26	,	23	,	5	);
f(	25	,	22	,	5	);
f(	25	,	21	,	5	);
f(	24	,	21	,	6	);
f(	23	,	20	,	6	);
f(	23	,	19	,	7	);
f(	22	,	18	,	7	);
f(	21	,	17	,	8	);
f(	21	,	17	,	8	);
f(	20	,	16	,	9	);
f(	19	,	15	,	10	);
f(	19	,	14	,	10	);
f(	18	,	14	,	11	);
f(	18	,	13	,	12	);
f(	17	,	12	,	13	);
f(	17	,	11	,	13	);
f(	16	,	11	,	14	);
f(	16	,	10	,	15	);
f(	15	,	9	,	16	);
f(	15	,	8	,	16	);
f(	14	,	8	,	17	);
f(	14	,	7	,	18	);
f(	14	,	6	,	19	);
f(	13	,	6	,	19	);
f(	13	,	5	,	20	);
f(	13	,	4	,	21	);
f(	13	,	4	,	22	);
f(	13	,	3	,	22	);
f(	13	,	3	,	23	);
f(	13	,	3	,	24	);
f(	26	,	24	,	4	);
f(	26	,	23	,	4	);
f(	25	,	22	,	4	);
f(	24	,	21	,	5	);
f(	23	,	21	,	5	);
f(	23	,	20	,	6	);
f(	22	,	19	,	6	);
f(	21	,	18	,	7	);
f(	21	,	18	,	7	);
f(	20	,	17	,	8	);
f(	20	,	16	,	9	);
f(	19	,	15	,	9	);
f(	18	,	15	,	10	);
f(	18	,	14	,	11	);
f(	17	,	13	,	12	);
f(	17	,	12	,	12	);
f(	16	,	12	,	13	);
f(	16	,	11	,	14	);
f(	15	,	10	,	15	);
f(	15	,	9	,	15	);
f(	14	,	9	,	16	);
f(	14	,	8	,	17	);
f(	13	,	7	,	18	);
f(	13	,	7	,	18	);
f(	13	,	6	,	19	);
f(	12	,	6	,	20	);
f(	12	,	5	,	21	);
f(	12	,	5	,	21	);
f(	12	,	4	,	22	);
f(	12	,	4	,	23	);
f(	12	,	4	,	24	);
f(	26	,	24	,	3	);
f(	25	,	23	,	3	);
f(	24	,	22	,	3	);
f(	24	,	22	,	4	);
f(	23	,	21	,	4	);
f(	22	,	20	,	5	);
f(	22	,	19	,	6	);
f(	21	,	19	,	6	);
f(	20	,	18	,	7	);
f(	20	,	17	,	8	);
f(	19	,	16	,	8	);
f(	18	,	16	,	9	);
f(	18	,	15	,	10	);
f(	17	,	14	,	11	);
f(	17	,	13	,	11	);
f(	16	,	13	,	12	);
f(	15	,	12	,	13	);
f(	15	,	11	,	14	);
f(	14	,	10	,	14	);
f(	14	,	10	,	15	);
f(	13	,	9	,	16	);
f(	13	,	8	,	17	);
f(	13	,	8	,	17	);
f(	12	,	7	,	18	);
f(	12	,	7	,	19	);
f(	12	,	6	,	20	);
f(	11	,	6	,	21	);
f(	11	,	5	,	21	);
f(	11	,	5	,	22	);
f(	11	,	5	,	23	);
f(	11	,	5	,	24	);
f(	26	,	24	,	2	);
f(	25	,	23	,	2	);
f(	24	,	23	,	3	);
f(	23	,	22	,	3	);
f(	23	,	21	,	4	);
f(	22	,	20	,	5	);
f(	21	,	20	,	5	);
f(	21	,	19	,	6	);
f(	20	,	18	,	7	);
f(	19	,	17	,	7	);
f(	19	,	17	,	8	);
f(	18	,	16	,	9	);
f(	17	,	15	,	10	);
f(	17	,	14	,	10	);
f(	16	,	14	,	11	);
f(	16	,	13	,	12	);
f(	15	,	12	,	13	);
f(	14	,	12	,	13	);
f(	14	,	11	,	14	);
f(	13	,	10	,	15	);
f(	13	,	10	,	16	);
f(	12	,	9	,	17	);
f(	12	,	8	,	17	);
f(	12	,	8	,	18	);
f(	11	,	7	,	19	);
f(	11	,	7	,	20	);
f(	11	,	6	,	20	);
f(	10	,	6	,	21	);
f(	10	,	6	,	22	);
f(	10	,	6	,	23	);
f(	10	,	5	,	24	);
f(	25	,	24	,	2	);
f(	25	,	24	,	2	);
f(	24	,	23	,	2	);
f(	23	,	22	,	3	);
f(	22	,	21	,	3	);
f(	22	,	21	,	4	);
f(	21	,	20	,	5	);
f(	20	,	19	,	6	);
f(	20	,	18	,	6	);
f(	19	,	18	,	7	);
f(	18	,	17	,	8	);
f(	18	,	16	,	9	);
f(	17	,	15	,	10	);
f(	16	,	15	,	10	);
f(	16	,	14	,	11	);
f(	15	,	13	,	12	);
f(	14	,	13	,	13	);
f(	14	,	12	,	13	);
f(	13	,	11	,	14	);
f(	13	,	11	,	15	);
f(	12	,	10	,	16	);
f(	12	,	9	,	16	);
f(	11	,	9	,	17	);
f(	11	,	8	,	18	);
f(	10	,	8	,	19	);
f(	10	,	7	,	20	);
f(	10	,	7	,	20	);
f(	10	,	7	,	21	);
f(	10	,	6	,	22	);
f(	9	,	6	,	23	);
f(	9	,	6	,	23	);
f(	25	,	24	,	1	);
f(	24	,	24	,	1	);
f(	24	,	23	,	2	);
f(	23	,	22	,	2	);
f(	22	,	21	,	3	);
f(	21	,	21	,	4	);
f(	21	,	20	,	5	);
f(	20	,	19	,	6	);
f(	19	,	19	,	6	);
f(	19	,	18	,	7	);
f(	18	,	17	,	8	);
f(	17	,	16	,	9	);
f(	16	,	16	,	9	);
f(	16	,	15	,	10	);
f(	15	,	14	,	11	);
f(	15	,	14	,	12	);
f(	14	,	13	,	13	);
f(	13	,	12	,	13	);
f(	13	,	12	,	14	);
f(	12	,	11	,	15	);
f(	12	,	11	,	16	);
f(	11	,	10	,	16	);
f(	11	,	9	,	17	);
f(	10	,	9	,	18	);
f(	10	,	8	,	19	);
f(	9	,	8	,	20	);
f(	9	,	8	,	20	);
f(	9	,	7	,	21	);
f(	9	,	7	,	22	);
f(	9	,	7	,	23	);
f(	9	,	7	,	23	);
f(	25	,	25	,	0	);
f(	24	,	24	,	1	);
f(	23	,	23	,	2	);
f(	22	,	22	,	2	);
f(	22	,	22	,	3	);
f(	21	,	21	,	4	);
f(	20	,	20	,	5	);
f(	20	,	20	,	5	);
f(	19	,	19	,	6	);
f(	18	,	18	,	7	);
f(	17	,	17	,	8	);
f(	17	,	17	,	9	);
f(	16	,	16	,	9	);
f(	15	,	15	,	10	);
f(	15	,	15	,	11	);
f(	14	,	14	,	12	);
f(	13	,	13	,	13	);
f(	13	,	13	,	13	);
f(	12	,	12	,	14	);
f(	12	,	12	,	15	);
f(	11	,	11	,	16	);
f(	11	,	11	,	16	);
f(	10	,	10	,	17	);
f(	10	,	10	,	18	);
f(	9	,	9	,	19	);
f(	9	,	9	,	20	);
f(	8	,	8	,	20	);
f(	8	,	8	,	21	);
f(	8	,	8	,	22	);
f(	8	,	8	,	23	);
f(	8	,	8	,	23	);
f(	24	,	25	,	1	);
f(	24	,	24	,	1	);
f(	23	,	24	,	2	);
f(	22	,	23	,	2	);
f(	21	,	22	,	3	);
f(	21	,	21	,	4	);
f(	20	,	21	,	5	);
f(	19	,	20	,	6	);
f(	19	,	19	,	6	);
f(	18	,	19	,	7	);
f(	17	,	18	,	8	);
f(	16	,	17	,	9	);
f(	16	,	16	,	9	);
f(	15	,	16	,	10	);
f(	14	,	15	,	11	);
f(	14	,	15	,	12	);
f(	13	,	14	,	13	);
f(	12	,	13	,	13	);
f(	12	,	13	,	14	);
f(	11	,	12	,	15	);
f(	11	,	12	,	16	);
f(	10	,	11	,	16	);
f(	9	,	11	,	17	);
f(	9	,	10	,	18	);
f(	8	,	10	,	19	);
f(	8	,	9	,	20	);
f(	8	,	9	,	20	);
f(	7	,	9	,	21	);
f(	7	,	9	,	22	);
f(	7	,	9	,	23	);
f(	7	,	9	,	23	);
f(	24	,	25	,	2	);
f(	24	,	25	,	2	);
f(	23	,	24	,	2	);
f(	22	,	23	,	3	);
f(	21	,	22	,	3	);
f(	21	,	22	,	4	);
f(	20	,	21	,	5	);
f(	19	,	20	,	6	);
f(	18	,	20	,	6	);
f(	18	,	19	,	7	);
f(	17	,	18	,	8	);
f(	16	,	18	,	9	);
f(	15	,	17	,	10	);
f(	15	,	16	,	10	);
f(	14	,	16	,	11	);
f(	13	,	15	,	12	);
f(	13	,	14	,	13	);
f(	12	,	14	,	13	);
f(	11	,	13	,	14	);
f(	11	,	13	,	15	);
f(	10	,	12	,	16	);
f(	9	,	12	,	16	);
f(	9	,	11	,	17	);
f(	8	,	11	,	18	);
f(	8	,	10	,	19	);
f(	7	,	10	,	20	);
f(	7	,	10	,	20	);
f(	7	,	10	,	21	);
f(	6	,	10	,	22	);
f(	6	,	9	,	23	);
f(	6	,	9	,	23	);
f(	24	,	26	,	2	);
f(	23	,	25	,	2	);
f(	23	,	24	,	3	);
f(	22	,	23	,	3	);
f(	21	,	23	,	4	);
f(	20	,	22	,	5	);
f(	20	,	21	,	5	);
f(	19	,	21	,	6	);
f(	18	,	20	,	7	);
f(	17	,	19	,	7	);
f(	17	,	19	,	8	);
f(	16	,	18	,	9	);
f(	15	,	17	,	10	);
f(	14	,	17	,	10	);
f(	14	,	16	,	11	);
f(	13	,	16	,	12	);
f(	12	,	15	,	13	);
f(	12	,	14	,	13	);
f(	11	,	14	,	14	);
f(	10	,	13	,	15	);
f(	10	,	13	,	16	);
f(	9	,	12	,	17	);
f(	8	,	12	,	17	);
f(	8	,	12	,	18	);
f(	7	,	11	,	19	);
f(	7	,	11	,	20	);
f(	6	,	11	,	20	);
f(	6	,	10	,	21	);
f(	6	,	10	,	22	);
f(	6	,	10	,	23	);
f(	5	,	10	,	24	);
f(	24	,	26	,	3	);
f(	23	,	25	,	3	);
f(	22	,	24	,	3	);
f(	22	,	24	,	4	);
f(	21	,	23	,	4	);
f(	20	,	22	,	5	);
f(	19	,	22	,	6	);
f(	19	,	21	,	6	);
f(	18	,	20	,	7	);
f(	17	,	20	,	8	);
f(	16	,	19	,	8	);
f(	16	,	18	,	9	);
f(	15	,	18	,	10	);
f(	14	,	17	,	11	);
f(	13	,	17	,	11	);
f(	13	,	16	,	12	);
f(	12	,	15	,	13	);
f(	11	,	15	,	14	);
f(	10	,	14	,	14	);
f(	10	,	14	,	15	);
f(	9	,	13	,	16	);
f(	8	,	13	,	17	);
f(	8	,	13	,	17	);
f(	7	,	12	,	18	);
f(	7	,	12	,	19	);
f(	6	,	12	,	20	);
f(	6	,	11	,	21	);
f(	5	,	11	,	21	);
f(	5	,	11	,	22	);
f(	5	,	11	,	23	);
f(	5	,	11	,	24	);
f(	24	,	26	,	4	);
f(	23	,	26	,	4	);
f(	22	,	25	,	4	);
f(	21	,	24	,	5	);
f(	21	,	23	,	5	);
f(	20	,	23	,	6	);
f(	19	,	22	,	6	);
f(	18	,	21	,	7	);
f(	18	,	21	,	7	);
f(	17	,	20	,	8	);
f(	16	,	20	,	9	);
f(	15	,	19	,	9	);
f(	15	,	18	,	10	);
f(	14	,	18	,	11	);
f(	13	,	17	,	12	);
f(	12	,	17	,	12	);
f(	12	,	16	,	13	);
f(	11	,	16	,	14	);
f(	10	,	15	,	15	);
f(	9	,	15	,	15	);
f(	9	,	14	,	16	);
f(	8	,	14	,	17	);
f(	7	,	13	,	18	);
f(	7	,	13	,	18	);
f(	6	,	13	,	19	);
f(	6	,	12	,	20	);
f(	5	,	12	,	21	);
f(	5	,	12	,	21	);
f(	4	,	12	,	22	);
f(	4	,	12	,	23	);
f(	4	,	12	,	24	);
f(	24	,	27	,	5	);
f(	23	,	26	,	5	);
f(	22	,	25	,	5	);
f(	21	,	25	,	5	);
f(	21	,	24	,	6	);
f(	20	,	23	,	6	);
f(	19	,	23	,	7	);
f(	18	,	22	,	7	);
f(	17	,	21	,	8	);
f(	17	,	21	,	8	);
f(	16	,	20	,	9	);
f(	15	,	19	,	10	);
f(	14	,	19	,	10	);
f(	14	,	18	,	11	);
f(	13	,	18	,	12	);
f(	12	,	17	,	13	);
f(	11	,	17	,	13	);
f(	11	,	16	,	14	);
f(	10	,	16	,	15	);
f(	9	,	15	,	16	);
f(	8	,	15	,	16	);
f(	8	,	14	,	17	);
f(	7	,	14	,	18	);
f(	6	,	14	,	19	);
f(	6	,	13	,	19	);
f(	5	,	13	,	20	);
f(	4	,	13	,	21	);
f(	4	,	13	,	22	);
f(	3	,	13	,	22	);
f(	3	,	13	,	23	);
f(	3	,	13	,	24	);
f(	24	,	27	,	5	);
f(	23	,	26	,	6	);
f(	22	,	26	,	6	);
f(	21	,	25	,	6	);
f(	20	,	24	,	6	);
f(	20	,	24	,	7	);
f(	19	,	23	,	7	);
f(	18	,	22	,	8	);
f(	17	,	22	,	8	);
f(	17	,	21	,	9	);
f(	16	,	21	,	10	);
f(	15	,	20	,	10	);
f(	14	,	19	,	11	);
f(	13	,	19	,	12	);
f(	13	,	18	,	12	);
f(	12	,	18	,	13	);
f(	11	,	17	,	14	);
f(	10	,	17	,	14	);
f(	10	,	16	,	15	);
f(	9	,	16	,	16	);
f(	8	,	15	,	17	);
f(	7	,	15	,	17	);
f(	7	,	15	,	18	);
f(	6	,	14	,	19	);
f(	5	,	14	,	20	);
f(	5	,	14	,	20	);
f(	4	,	14	,	21	);
f(	3	,	13	,	22	);
f(	3	,	13	,	23	);
f(	2	,	13	,	23	);
f(	2	,	13	,	24	);
f(	23	,	27	,	6	);
f(	23	,	27	,	6	);
f(	22	,	26	,	6	);
f(	21	,	25	,	7	);
f(	20	,	25	,	7	);
f(	20	,	24	,	7	);
f(	19	,	23	,	8	);
f(	18	,	23	,	8	);
f(	17	,	22	,	9	);
f(	16	,	22	,	9	);
f(	16	,	21	,	10	);
f(	15	,	20	,	11	);
f(	14	,	20	,	11	);
f(	13	,	19	,	12	);
f(	13	,	19	,	13	);
f(	12	,	18	,	13	);
f(	11	,	18	,	14	);
f(	10	,	17	,	15	);
f(	10	,	17	,	15	);
f(	9	,	16	,	16	);
f(	8	,	16	,	17	);
f(	7	,	16	,	18	);
f(	6	,	15	,	18	);
f(	6	,	15	,	19	);
f(	5	,	15	,	20	);
f(	4	,	15	,	21	);
f(	3	,	14	,	21	);
f(	3	,	14	,	22	);
f(	2	,	14	,	23	);
f(	2	,	14	,	24	);
f(	2	,	14	,	24	);
f(	23	,	28	,	7	);
f(	23	,	27	,	7	);
f(	22	,	26	,	7	);
f(	21	,	26	,	7	);
f(	20	,	25	,	8	);
f(	20	,	25	,	8	);
f(	19	,	24	,	8	);
f(	18	,	23	,	9	);
f(	17	,	23	,	9	);
f(	16	,	22	,	10	);
f(	16	,	22	,	11	);
f(	15	,	21	,	11	);
f(	14	,	20	,	12	);
f(	13	,	20	,	12	);
f(	13	,	19	,	13	);
f(	12	,	19	,	14	);
f(	11	,	18	,	14	);
f(	10	,	18	,	15	);
f(	9	,	18	,	16	);
f(	9	,	17	,	16	);
f(	8	,	17	,	17	);
f(	7	,	16	,	18	);
f(	6	,	16	,	19	);
f(	6	,	16	,	19	);
f(	5	,	16	,	20	);
f(	4	,	15	,	21	);
f(	3	,	15	,	21	);
f(	2	,	15	,	22	);
f(	2	,	15	,	23	);
f(	1	,	15	,	24	);
f(	1	,	15	,	24	);
f(	23	,	28	,	8	);
f(	23	,	28	,	8	);
f(	22	,	27	,	8	);
f(	21	,	26	,	8	);
f(	20	,	26	,	8	);
f(	20	,	25	,	9	);
f(	19	,	24	,	9	);
f(	18	,	24	,	10	);
f(	17	,	23	,	10	);
f(	16	,	23	,	11	);
f(	16	,	22	,	11	);
f(	15	,	22	,	12	);
f(	14	,	21	,	12	);
f(	13	,	21	,	13	);
f(	13	,	20	,	13	);
f(	12	,	20	,	14	);
f(	11	,	19	,	15	);
f(	10	,	19	,	15	);
f(	9	,	18	,	16	);
f(	9	,	18	,	17	);
f(	8	,	17	,	17	);
f(	7	,	17	,	18	);
f(	6	,	17	,	19	);
f(	5	,	17	,	20	);
f(	5	,	16	,	20	);
f(	4	,	16	,	21	);
f(	3	,	16	,	22	);
f(	2	,	16	,	22	);
f(	2	,	16	,	23	);
f(	1	,	16	,	24	);
f(	0	,	16	,	25	);
*/


		
		while(1);		
	}

	
#endif //def TESTS_ENABLE	
		



#endif //ENABLE_ARRAY_US
