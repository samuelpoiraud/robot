   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"QS_who_am_i.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.global	robot_id
  19              		.bss
  22              	robot_id:
  23 0000 00       		.space	1
  24              		.global	found
  27              	found:
  28 0001 00       		.space	1
  29              		.text
  30              		.align	2
  31              		.global	QS_WHO_AM_I_find
  32              		.thumb
  33              		.thumb_func
  35              	QS_WHO_AM_I_find:
  36              	.LFB111:
  37              		.file 1 "../QS/QS_who_am_i.c"
   1:../QS/QS_who_am_i.c **** /*
   2:../QS/QS_who_am_i.c ****  *	Club Robot ESEO 2013
   3:../QS/QS_who_am_i.c ****  *	Tiny & Krusty
   4:../QS/QS_who_am_i.c ****  *
   5:../QS/QS_who_am_i.c ****  *	Fichier : QS_who_am_i.c
   6:../QS/QS_who_am_i.c ****  *	Package : Qualite Software
   7:../QS/QS_who_am_i.c ****  *	Description :	Utilise des ports de la carte facto pour identifier 
   8:../QS/QS_who_am_i.c ****  *					le robot sur lequel la carte se trouve.
   9:../QS/QS_who_am_i.c ****  *	Auteur : Nirgal
  10:../QS/QS_who_am_i.c ****  *	Licence : CeCILL-C (voir LICENCE.txt)
  11:../QS/QS_who_am_i.c ****  *	Version 201302
  12:../QS/QS_who_am_i.c ****  */
  13:../QS/QS_who_am_i.c **** #include "QS_who_am_i.h"
  14:../QS/QS_who_am_i.c **** 
  15:../QS/QS_who_am_i.c **** 
  16:../QS/QS_who_am_i.c **** #ifdef NEW_CONFIG_ORGANISATION
  17:../QS/QS_who_am_i.c **** 	#include "config_pin.h"
  18:../QS/QS_who_am_i.c **** #endif
  19:../QS/QS_who_am_i.c **** 
  20:../QS/QS_who_am_i.c **** 
  21:../QS/QS_who_am_i.c **** 	volatile robot_id_e robot_id = 0;
  22:../QS/QS_who_am_i.c **** 	volatile bool_e found = FALSE;
  23:../QS/QS_who_am_i.c **** 	
  24:../QS/QS_who_am_i.c **** 	//@brief 	Cette fonction doit être appelée lors de l'initialisation.
  25:../QS/QS_who_am_i.c **** 	//@pre 		le fond de panier sur lequel la carte est branché doit être cablé conformément à "_PORTS.
  26:../QS/QS_who_am_i.c **** 	//@post		Le module QS_WHO_AM_I sait alors sur quel robot la carte est branchée
  27:../QS/QS_who_am_i.c **** 	void QS_WHO_AM_I_find(void)
  28:../QS/QS_who_am_i.c **** 	{
  38              		.loc 1 28 0
  39              		.cfi_startproc
  40              		@ args = 0, pretend = 0, frame = 0
  41              		@ frame_needed = 1, uses_anonymous_args = 0
  42              		@ link register save eliminated.
  43 0000 80B4     		push	{r7}
  44              	.LCFI0:
  45              		.cfi_def_cfa_offset 4
  46              		.cfi_offset 7, -4
  47 0002 00AF     		add	r7, sp, #0
  48              	.LCFI1:
  49              		.cfi_def_cfa_register 7
  29:../QS/QS_who_am_i.c **** 		if(found)
  50              		.loc 1 29 0
  51 0004 40F20003 		movw	r3, #:lower16:found
  52 0008 C0F20003 		movt	r3, #:upper16:found
  53 000c 1B78     		ldrb	r3, [r3, #0]
  54 000e DBB2     		uxtb	r3, r3
  55 0010 002B     		cmp	r3, #0
  56 0012 1FD1     		bne	.L5
  57              	.L2:
  30:../QS/QS_who_am_i.c **** 			return;		//Vous ne devez appeler QS_WHO_AM_I_find qu'une seule fois !
  31:../QS/QS_who_am_i.c **** 		found = TRUE;
  58              		.loc 1 31 0
  59 0014 40F20003 		movw	r3, #:lower16:found
  60 0018 C0F20003 		movt	r3, #:upper16:found
  61 001c 4FF00102 		mov	r2, #1
  62 0020 1A70     		strb	r2, [r3, #0]
  32:../QS/QS_who_am_i.c **** 
  33:../QS/QS_who_am_i.c **** 		#if !defined(DISABLE_WHO_AM_I)
  34:../QS/QS_who_am_i.c **** 			//On lit l'entrée...
  35:../QS/QS_who_am_i.c **** 			if(PORT_ROBOT_ID)
  63              		.loc 1 35 0
  64 0022 4FF40063 		mov	r3, #2048
  65 0026 C4F20203 		movt	r3, 16386
  66 002a 1B69     		ldr	r3, [r3, #16]
  67 002c 03F40053 		and	r3, r3, #8192
  68 0030 002B     		cmp	r3, #0
  69 0032 07D0     		beq	.L4
  36:../QS/QS_who_am_i.c **** 				robot_id = TINY;
  70              		.loc 1 36 0
  71 0034 40F20003 		movw	r3, #:lower16:robot_id
  72 0038 C0F20003 		movt	r3, #:upper16:robot_id
  73 003c 4FF00102 		mov	r2, #1
  74 0040 1A70     		strb	r2, [r3, #0]
  75 0042 08E0     		b	.L1
  76              	.L4:
  37:../QS/QS_who_am_i.c **** 			else
  38:../QS/QS_who_am_i.c **** 				robot_id = KRUSTY;
  77              		.loc 1 38 0
  78 0044 40F20003 		movw	r3, #:lower16:robot_id
  79 0048 C0F20003 		movt	r3, #:upper16:robot_id
  80 004c 4FF00002 		mov	r2, #0
  81 0050 1A70     		strb	r2, [r3, #0]
  82 0052 00E0     		b	.L1
  83              	.L5:
  30:../QS/QS_who_am_i.c **** 			return;		//Vous ne devez appeler QS_WHO_AM_I_find qu'une seule fois !
  84              		.loc 1 30 0
  85 0054 00BF     		nop
  86              	.L1:
  39:../QS/QS_who_am_i.c **** 		#elif 1-DISABLE_WHO_AM_I-1 == 2		//Permet de savoir si DISABLE_WHO_AM_I est défini à quelque chos
  40:../QS/QS_who_am_i.c **** 			#warning "Definir DISABLE_WHO_AM_I a KRUSTY ou TINY pour definir le robot explicitement. Ici, TI
  41:../QS/QS_who_am_i.c **** 			robot_id = TINY;	//Par défaut, le robot est ...
  42:../QS/QS_who_am_i.c **** 		#else
  43:../QS/QS_who_am_i.c **** 			robot_id = DISABLE_WHO_AM_I;
  44:../QS/QS_who_am_i.c **** 		#endif
  45:../QS/QS_who_am_i.c **** 	}
  87              		.loc 1 45 0
  88 0056 BD46     		mov	sp, r7
  89 0058 80BC     		pop	{r7}
  90 005a 7047     		bx	lr
  91              		.cfi_endproc
  92              	.LFE111:
  94              		.align	2
  95              		.global	QS_WHO_AM_I_get
  96              		.thumb
  97              		.thumb_func
  99              	QS_WHO_AM_I_get:
 100              	.LFB112:
  46:../QS/QS_who_am_i.c **** 	
  47:../QS/QS_who_am_i.c **** 	
  48:../QS/QS_who_am_i.c **** 	//@return	L'identifiant du robot sur lequel est branchée la carte qui exécute ce code !
  49:../QS/QS_who_am_i.c **** 	robot_id_e QS_WHO_AM_I_get(void)
  50:../QS/QS_who_am_i.c **** 	{
 101              		.loc 1 50 0
 102              		.cfi_startproc
 103              		@ args = 0, pretend = 0, frame = 0
 104              		@ frame_needed = 1, uses_anonymous_args = 0
 105              		@ link register save eliminated.
 106 005c 80B4     		push	{r7}
 107              	.LCFI2:
 108              		.cfi_def_cfa_offset 4
 109              		.cfi_offset 7, -4
 110 005e 00AF     		add	r7, sp, #0
 111              	.LCFI3:
 112              		.cfi_def_cfa_register 7
  51:../QS/QS_who_am_i.c **** 		assert(found);		//Vous devez appeler QS_WHO_AM_I_find dans l'initialisation avant tout appel à QS
  52:../QS/QS_who_am_i.c **** 		return robot_id;
 113              		.loc 1 52 0
 114 0060 40F20003 		movw	r3, #:lower16:robot_id
 115 0064 C0F20003 		movt	r3, #:upper16:robot_id
 116 0068 1B78     		ldrb	r3, [r3, #0]
 117 006a DBB2     		uxtb	r3, r3
  53:../QS/QS_who_am_i.c **** 	}
 118              		.loc 1 53 0
 119 006c 1846     		mov	r0, r3
 120 006e BD46     		mov	sp, r7
 121 0070 80BC     		pop	{r7}
 122 0072 7047     		bx	lr
 123              		.cfi_endproc
 124              	.LFE112:
 126              	.Letext0:
 127              		.file 2 "c:\\program files (x86)\\eclipse-arm-eseo\\gcc-arm-none-eabi-4_7-2013q2-20130614-win32\\g
 128              		.file 3 "../stm32f4xx/stm32f4xx.h"
 129              		.file 4 "../QS/QS_types.h"
 130              		.file 5 "../QS/QS_who_am_i.h"
 131              		.file 6 "../stm32f4xx/core_cm4.h"
DEFINED SYMBOLS
                            *ABS*:00000000 QS_who_am_i.c
C:\Users\Amaury\AppData\Local\Temp\ccVnFYvd.s:22     .bss:00000000 robot_id
C:\Users\Amaury\AppData\Local\Temp\ccVnFYvd.s:23     .bss:00000000 $d
C:\Users\Amaury\AppData\Local\Temp\ccVnFYvd.s:27     .bss:00000001 found
C:\Users\Amaury\AppData\Local\Temp\ccVnFYvd.s:30     .text:00000000 $t
C:\Users\Amaury\AppData\Local\Temp\ccVnFYvd.s:35     .text:00000000 QS_WHO_AM_I_find
C:\Users\Amaury\AppData\Local\Temp\ccVnFYvd.s:99     .text:0000005c QS_WHO_AM_I_get
                     .debug_frame:00000010 $d
                           .group:00000000 wm4.1.13c6c37fe6ef97541a459ad1f2cd1ddb
                           .group:00000000 wm4.stm32f4xx.h.54.d172d9d6631f11a8436908e748990b53
                           .group:00000000 wm4.core_cm4.h.32.39d0f71cd333856d56f1935d9037195e
                           .group:00000000 wm4.newlib.h.8.a9901dc52d1357e3e94003403d43f8b5
                           .group:00000000 wm4.features.h.22.b72b3baab2bb2eab3661375590100b6b
                           .group:00000000 wm4.config.h.193.5fb8ef056cdff92dec3dee9552839d8c
                           .group:00000000 wm4._ansi.h.23.b5bb84d7ba97d82b5b1dc1826a7ae811
                           .group:00000000 wm4.stdint.h.20.54ad762faa59e3c05491630641c8d8bf
                           .group:00000000 wm4.core_cmInstr.h.25.d8165482ef3061013a2fc83e2d85f3d9
                           .group:00000000 wm4.core_cm4_simd.h.29.013e5bcf58dba2d27c60184174208e07
                           .group:00000000 wm4.core_cm4.h.163.d36d54ebc869626f337c4fcb95a9b424
                           .group:00000000 wm4.stm32f4xx.h.306.7867854ab89778ccd63e1fde7c22c0b6
                           .group:00000000 wm4.stm32f4xx_rcc.h.65.29a27820bc754566c4190ed8ad1c1d80
                           .group:00000000 wm4.misc.h.31.041217492a6cb86f2fb26099f373a465
                           .group:00000000 wm4.stm32f4xx.h.7233.cb6cb3cb095c29e1fc0eb152d26090b1
                           .group:00000000 wm4.Global_config.h.14.bea53ddf4045d71f1c9fb87037131e8e
                           .group:00000000 wm4.config_global.h.12.5c30ea43d7f0d9daa101874e8ba75f6f
                           .group:00000000 wm4.config_qs.h.12.4699be7196e891fb4cd84d522e29cde7
                           .group:00000000 wm4.config_qs.h.12.8e0ab7f7cbbdaecfb1e464f5610b5d86
                           .group:00000000 wm4.QS_macro.h.19.3d2533714681986d2ad8c517737c4640
                           .group:00000000 wm4.config_pin.h.12.92dbe1317fae649a069f2ce6e5ad725c
                           .group:00000000 wm4.config_pin.h.12.20ee5a96fdfc3c7ca3bc6056aaec7473

NO UNDEFINED SYMBOLS
