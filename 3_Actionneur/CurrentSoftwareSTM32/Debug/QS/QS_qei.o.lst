   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"QS_qei.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.align	2
  19              		.global	QEI_init
  20              		.thumb
  21              		.thumb_func
  23              	QEI_init:
  24              	.LFB111:
  25              		.file 1 "../QS/QS_qei.c"
   1:../QS/QS_qei.c **** /*
   2:../QS/QS_qei.c ****  *	Club Robot ESEO 2008 - 2010
   3:../QS/QS_qei.c ****  *	Archi-Tech', PACMAN
   4:../QS/QS_qei.c ****  *
   5:../QS/QS_qei.c ****  *	Fichier : QS_qei.c
   6:../QS/QS_qei.c ****  *	Package : Qualite Software
   7:../QS/QS_qei.c ****  *	Description :	Utilise le module QEI pour décoder les
   8:../QS/QS_qei.c **** 					signaux d'un codeur incrémental
   9:../QS/QS_qei.c ****  *	Auteur : Jacen
  10:../QS/QS_qei.c ****  *	Licence : CeCILL-C (voir LICENCE.txt)
  11:../QS/QS_qei.c ****  *	Version 20100620
  12:../QS/QS_qei.c ****  */
  13:../QS/QS_qei.c **** 
  14:../QS/QS_qei.c **** #include "QS_qei.h"
  15:../QS/QS_qei.c **** #include "QS_ports.h"
  16:../QS/QS_qei.c **** #include "stm32f4xx_tim.h"
  17:../QS/QS_qei.c **** 
  18:../QS/QS_qei.c **** /*-------------------------------------
  19:../QS/QS_qei.c **** 	Initialisation de l'interface
  20:../QS/QS_qei.c **** -------------------------------------*/
  21:../QS/QS_qei.c **** void QEI_init() 
  22:../QS/QS_qei.c **** {
  26              		.loc 1 22 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 0
  29              		@ frame_needed = 1, uses_anonymous_args = 0
  30 0000 80B5     		push	{r7, lr}
  31              	.LCFI0:
  32              		.cfi_def_cfa_offset 8
  33              		.cfi_offset 7, -8
  34              		.cfi_offset 14, -4
  35 0002 00AF     		add	r7, sp, #0
  36              	.LCFI1:
  37              		.cfi_def_cfa_register 7
  23:../QS/QS_qei.c **** 	static bool_e initialized = FALSE;
  24:../QS/QS_qei.c **** 	if(initialized)
  38              		.loc 1 24 0
  39 0004 40F20003 		movw	r3, #:lower16:initialized.6060
  40 0008 C0F20003 		movt	r3, #:upper16:initialized.6060
  41 000c 1B78     		ldrb	r3, [r3, #0]	@ zero_extendqisi2
  42 000e 002B     		cmp	r3, #0
  43 0010 41D1     		bne	.L4
  44              	.L2:
  25:../QS/QS_qei.c **** 		return;
  26:../QS/QS_qei.c **** 	initialized = TRUE;
  45              		.loc 1 26 0
  46 0012 40F20003 		movw	r3, #:lower16:initialized.6060
  47 0016 C0F20003 		movt	r3, #:upper16:initialized.6060
  48 001a 4FF00102 		mov	r2, #1
  49 001e 1A70     		strb	r2, [r3, #0]
  27:../QS/QS_qei.c **** 
  28:../QS/QS_qei.c **** 	PORTS_qei_init();
  50              		.loc 1 28 0
  51 0020 FFF7FEFF 		bl	PORTS_qei_init
  29:../QS/QS_qei.c **** 
  30:../QS/QS_qei.c **** 	RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM3  | RCC_APB1Periph_TIM2 , ENABLE);
  52              		.loc 1 30 0
  53 0024 4FF00300 		mov	r0, #3
  54 0028 4FF00101 		mov	r1, #1
  55 002c FFF7FEFF 		bl	RCC_APB1PeriphClockCmd
  31:../QS/QS_qei.c **** 
  32:../QS/QS_qei.c **** 	TIM_EncoderInterfaceConfig(TIM3, TIM_EncoderMode_TI12, TIM_ICPolarity_Rising, TIM_ICPolarity_Risin
  56              		.loc 1 32 0
  57 0030 4FF48060 		mov	r0, #1024
  58 0034 C4F20000 		movt	r0, 16384
  59 0038 4FF00301 		mov	r1, #3
  60 003c 4FF00002 		mov	r2, #0
  61 0040 4FF00003 		mov	r3, #0
  62 0044 FFF7FEFF 		bl	TIM_EncoderInterfaceConfig
  33:../QS/QS_qei.c **** 	TIM_SetAutoreload(TIM3, 0xFFFF);
  63              		.loc 1 33 0
  64 0048 4FF48060 		mov	r0, #1024
  65 004c C4F20000 		movt	r0, 16384
  66 0050 4FF6FF71 		movw	r1, #65535
  67 0054 FFF7FEFF 		bl	TIM_SetAutoreload
  34:../QS/QS_qei.c **** 	TIM_EncoderInterfaceConfig(TIM2, TIM_EncoderMode_TI12, TIM_ICPolarity_Rising, TIM_ICPolarity_Risin
  68              		.loc 1 34 0
  69 0058 4FF08040 		mov	r0, #1073741824
  70 005c 4FF00301 		mov	r1, #3
  71 0060 4FF00002 		mov	r2, #0
  72 0064 4FF00003 		mov	r3, #0
  73 0068 FFF7FEFF 		bl	TIM_EncoderInterfaceConfig
  35:../QS/QS_qei.c **** 	TIM_SetAutoreload(TIM2, 0xFFFF);
  74              		.loc 1 35 0
  75 006c 4FF08040 		mov	r0, #1073741824
  76 0070 4FF6FF71 		movw	r1, #65535
  77 0074 FFF7FEFF 		bl	TIM_SetAutoreload
  36:../QS/QS_qei.c **** 
  37:../QS/QS_qei.c **** 	TIM_Cmd(TIM3, ENABLE);
  78              		.loc 1 37 0
  79 0078 4FF48060 		mov	r0, #1024
  80 007c C4F20000 		movt	r0, 16384
  81 0080 4FF00101 		mov	r1, #1
  82 0084 FFF7FEFF 		bl	TIM_Cmd
  38:../QS/QS_qei.c **** 	TIM_Cmd(TIM2, ENABLE);
  83              		.loc 1 38 0
  84 0088 4FF08040 		mov	r0, #1073741824
  85 008c 4FF00101 		mov	r1, #1
  86 0090 FFF7FEFF 		bl	TIM_Cmd
  87 0094 00E0     		b	.L1
  88              	.L4:
  25:../QS/QS_qei.c **** 		return;
  89              		.loc 1 25 0
  90 0096 00BF     		nop
  91              	.L1:
  39:../QS/QS_qei.c **** }
  92              		.loc 1 39 0
  93 0098 80BD     		pop	{r7, pc}
  94              		.cfi_endproc
  95              	.LFE111:
  97 009a 00BF     		.align	2
  98              		.global	QEI1_get_count
  99              		.thumb
 100              		.thumb_func
 102              	QEI1_get_count:
 103              	.LFB112:
  40:../QS/QS_qei.c **** 
  41:../QS/QS_qei.c **** /*-------------------------------------
  42:../QS/QS_qei.c **** 	Recupération de la valeur du codeur
  43:../QS/QS_qei.c **** -------------------------------------*/
  44:../QS/QS_qei.c **** Sint16 QEI1_get_count()
  45:../QS/QS_qei.c **** {
 104              		.loc 1 45 0
 105              		.cfi_startproc
 106              		@ args = 0, pretend = 0, frame = 0
 107              		@ frame_needed = 1, uses_anonymous_args = 0
 108 009c 80B5     		push	{r7, lr}
 109              	.LCFI2:
 110              		.cfi_def_cfa_offset 8
 111              		.cfi_offset 7, -8
 112              		.cfi_offset 14, -4
 113 009e 00AF     		add	r7, sp, #0
 114              	.LCFI3:
 115              		.cfi_def_cfa_register 7
  46:../QS/QS_qei.c **** 	return -(Sint16)TIM_GetCounter(TIM3);
 116              		.loc 1 46 0
 117 00a0 4FF48060 		mov	r0, #1024
 118 00a4 C4F20000 		movt	r0, 16384
 119 00a8 FFF7FEFF 		bl	TIM_GetCounter
 120 00ac 0346     		mov	r3, r0
 121 00ae 9BB2     		uxth	r3, r3
 122 00b0 C3F10003 		rsb	r3, r3, #0
 123 00b4 9BB2     		uxth	r3, r3
 124 00b6 9BB2     		uxth	r3, r3
 125 00b8 1BB2     		sxth	r3, r3
  47:../QS/QS_qei.c **** }
 126              		.loc 1 47 0
 127 00ba 1846     		mov	r0, r3
 128 00bc 80BD     		pop	{r7, pc}
 129              		.cfi_endproc
 130              	.LFE112:
 132 00be 00BF     		.align	2
 133              		.global	QEI1_set_count
 134              		.thumb
 135              		.thumb_func
 137              	QEI1_set_count:
 138              	.LFB113:
  48:../QS/QS_qei.c **** 
  49:../QS/QS_qei.c **** void QEI1_set_count(Sint16 count)
  50:../QS/QS_qei.c **** {	
 139              		.loc 1 50 0
 140              		.cfi_startproc
 141              		@ args = 0, pretend = 0, frame = 8
 142              		@ frame_needed = 1, uses_anonymous_args = 0
 143 00c0 80B5     		push	{r7, lr}
 144              	.LCFI4:
 145              		.cfi_def_cfa_offset 8
 146              		.cfi_offset 7, -8
 147              		.cfi_offset 14, -4
 148 00c2 82B0     		sub	sp, sp, #8
 149              	.LCFI5:
 150              		.cfi_def_cfa_offset 16
 151 00c4 00AF     		add	r7, sp, #0
 152              	.LCFI6:
 153              		.cfi_def_cfa_register 7
 154 00c6 0346     		mov	r3, r0
 155 00c8 FB80     		strh	r3, [r7, #6]	@ movhi
  51:../QS/QS_qei.c **** 	TIM_SetCounter(TIM3, (Sint32)count);
 156              		.loc 1 51 0
 157 00ca B7F90630 		ldrsh	r3, [r7, #6]
 158 00ce 4FF48060 		mov	r0, #1024
 159 00d2 C4F20000 		movt	r0, 16384
 160 00d6 1946     		mov	r1, r3
 161 00d8 FFF7FEFF 		bl	TIM_SetCounter
  52:../QS/QS_qei.c **** }
 162              		.loc 1 52 0
 163 00dc 07F10807 		add	r7, r7, #8
 164 00e0 BD46     		mov	sp, r7
 165 00e2 80BD     		pop	{r7, pc}
 166              		.cfi_endproc
 167              	.LFE113:
 169              		.align	2
 170              		.global	QEI2_get_count
 171              		.thumb
 172              		.thumb_func
 174              	QEI2_get_count:
 175              	.LFB114:
  53:../QS/QS_qei.c **** 
  54:../QS/QS_qei.c **** Sint16 QEI2_get_count()
  55:../QS/QS_qei.c **** {
 176              		.loc 1 55 0
 177              		.cfi_startproc
 178              		@ args = 0, pretend = 0, frame = 0
 179              		@ frame_needed = 1, uses_anonymous_args = 0
 180 00e4 80B5     		push	{r7, lr}
 181              	.LCFI7:
 182              		.cfi_def_cfa_offset 8
 183              		.cfi_offset 7, -8
 184              		.cfi_offset 14, -4
 185 00e6 00AF     		add	r7, sp, #0
 186              	.LCFI8:
 187              		.cfi_def_cfa_register 7
  56:../QS/QS_qei.c **** 	return (Sint16)TIM_GetCounter(TIM2);
 188              		.loc 1 56 0
 189 00e8 4FF08040 		mov	r0, #1073741824
 190 00ec FFF7FEFF 		bl	TIM_GetCounter
 191 00f0 0346     		mov	r3, r0
 192 00f2 9BB2     		uxth	r3, r3
 193 00f4 1BB2     		sxth	r3, r3
  57:../QS/QS_qei.c **** }
 194              		.loc 1 57 0
 195 00f6 1846     		mov	r0, r3
 196 00f8 80BD     		pop	{r7, pc}
 197              		.cfi_endproc
 198              	.LFE114:
 200 00fa 00BF     		.align	2
 201              		.global	QEI2_set_count
 202              		.thumb
 203              		.thumb_func
 205              	QEI2_set_count:
 206              	.LFB115:
  58:../QS/QS_qei.c **** 
  59:../QS/QS_qei.c **** void QEI2_set_count(Sint16 count)
  60:../QS/QS_qei.c **** {
 207              		.loc 1 60 0
 208              		.cfi_startproc
 209              		@ args = 0, pretend = 0, frame = 8
 210              		@ frame_needed = 1, uses_anonymous_args = 0
 211 00fc 80B5     		push	{r7, lr}
 212              	.LCFI9:
 213              		.cfi_def_cfa_offset 8
 214              		.cfi_offset 7, -8
 215              		.cfi_offset 14, -4
 216 00fe 82B0     		sub	sp, sp, #8
 217              	.LCFI10:
 218              		.cfi_def_cfa_offset 16
 219 0100 00AF     		add	r7, sp, #0
 220              	.LCFI11:
 221              		.cfi_def_cfa_register 7
 222 0102 0346     		mov	r3, r0
 223 0104 FB80     		strh	r3, [r7, #6]	@ movhi
  61:../QS/QS_qei.c **** 	TIM_SetCounter(TIM2, (Sint32)count);
 224              		.loc 1 61 0
 225 0106 B7F90630 		ldrsh	r3, [r7, #6]
 226 010a 4FF08040 		mov	r0, #1073741824
 227 010e 1946     		mov	r1, r3
 228 0110 FFF7FEFF 		bl	TIM_SetCounter
  62:../QS/QS_qei.c **** }
 229              		.loc 1 62 0
 230 0114 07F10807 		add	r7, r7, #8
 231 0118 BD46     		mov	sp, r7
 232 011a 80BD     		pop	{r7, pc}
 233              		.cfi_endproc
 234              	.LFE115:
 236              		.bss
 237              	initialized.6060:
 238 0000 00       		.space	1
 239              		.text
 240              	.Letext0:
 241              		.file 2 "c:\\program files (x86)\\eclipse-arm-eseo\\gcc-arm-none-eabi-4_7-2013q2-20130614-win32\\g
 242              		.file 3 "../stm32f4xx/stm32f4xx.h"
 243              		.file 4 "../QS/QS_types.h"
 244              		.file 5 "../stm32f4xx/core_cm4.h"
DEFINED SYMBOLS
                            *ABS*:00000000 QS_qei.c
C:\Users\Amaury\AppData\Local\Temp\cce7sVfP.s:18     .text:00000000 $t
C:\Users\Amaury\AppData\Local\Temp\cce7sVfP.s:23     .text:00000000 QEI_init
C:\Users\Amaury\AppData\Local\Temp\cce7sVfP.s:237    .bss:00000000 initialized.6060
C:\Users\Amaury\AppData\Local\Temp\cce7sVfP.s:102    .text:0000009c QEI1_get_count
C:\Users\Amaury\AppData\Local\Temp\cce7sVfP.s:137    .text:000000c0 QEI1_set_count
C:\Users\Amaury\AppData\Local\Temp\cce7sVfP.s:174    .text:000000e4 QEI2_get_count
C:\Users\Amaury\AppData\Local\Temp\cce7sVfP.s:205    .text:000000fc QEI2_set_count
C:\Users\Amaury\AppData\Local\Temp\cce7sVfP.s:238    .bss:00000000 $d
                     .debug_frame:00000010 $d
                           .group:00000000 wm4.1.13c6c37fe6ef97541a459ad1f2cd1ddb
                           .group:00000000 wm4.stm32f4xx.h.54.d172d9d6631f11a8436908e748990b53
                           .group:00000000 wm4.core_cm4.h.32.39d0f71cd333856d56f1935d9037195e
                           .group:00000000 wm4.newlib.h.8.a9901dc52d1357e3e94003403d43f8b5
                           .group:00000000 wm4.features.h.22.b72b3baab2bb2eab3661375590100b6b
                           .group:00000000 wm4.config.h.193.5fb8ef056cdff92dec3dee9552839d8c
                           .group:00000000 wm4._ansi.h.23.b5bb84d7ba97d82b5b1dc1826a7ae811
                           .group:00000000 wm4.stdint.h.20.54ad762faa59e3c05491630641c8d8bf
                           .group:00000000 wm4.core_cmInstr.h.25.d8165482ef3061013a2fc83e2d85f3d9
                           .group:00000000 wm4.core_cm4_simd.h.29.013e5bcf58dba2d27c60184174208e07
                           .group:00000000 wm4.core_cm4.h.163.d36d54ebc869626f337c4fcb95a9b424
                           .group:00000000 wm4.stm32f4xx.h.306.7867854ab89778ccd63e1fde7c22c0b6
                           .group:00000000 wm4.stm32f4xx_rcc.h.65.29a27820bc754566c4190ed8ad1c1d80
                           .group:00000000 wm4.misc.h.31.041217492a6cb86f2fb26099f373a465
                           .group:00000000 wm4.stm32f4xx.h.7233.cb6cb3cb095c29e1fc0eb152d26090b1
                           .group:00000000 wm4.Global_config.h.14.bea53ddf4045d71f1c9fb87037131e8e
                           .group:00000000 wm4.config_global.h.12.5c30ea43d7f0d9daa101874e8ba75f6f
                           .group:00000000 wm4.config_qs.h.12.4699be7196e891fb4cd84d522e29cde7
                           .group:00000000 wm4.config_qs.h.12.8e0ab7f7cbbdaecfb1e464f5610b5d86
                           .group:00000000 wm4.QS_macro.h.19.3d2533714681986d2ad8c517737c4640
                           .group:00000000 wm4.QS_qei.h.22.53f5ff4763d170f48f6f116222077a65
                           .group:00000000 wm4.stm32f4xx_tim.h.31.b1d608fbde729347e4ccf70799e654d2

UNDEFINED SYMBOLS
PORTS_qei_init
RCC_APB1PeriphClockCmd
TIM_EncoderInterfaceConfig
TIM_SetAutoreload
TIM_Cmd
TIM_GetCounter
TIM_SetCounter
